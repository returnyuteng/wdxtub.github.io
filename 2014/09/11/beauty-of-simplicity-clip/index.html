<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.lug.ustc.edu.cn/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="设计,简约,方法," />





  <link rel="alternate" href="/atom.xml" title="小土刀" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="未来的某些事情，是我们所不知道的。">
<meta property="og:type" content="article">
<meta property="og:title" content="【简约之美：软件设计之道】读书笔记">
<meta property="og:url" content="http://wdxtub.com/2014/09/11/beauty-of-simplicity-clip/index.html">
<meta property="og:site_name" content="小土刀">
<meta property="og:description" content="未来的某些事情，是我们所不知道的。">
<meta property="og:updated_time" content="2016-05-27T22:47:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【简约之美：软件设计之道】读书笔记">
<meta name="twitter:description" content="未来的某些事情，是我们所不知道的。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 4016951,
      author: '博主'
    }
  };
</script>

  <title> 【简约之美：软件设计之道】读书笔记 | 小土刀 </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <!-- hexo-inject:begin --><!-- hexo-inject:end --><script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=59042340";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <div style="display: none;">
    <script src="http://s6.cnzz.com/stat.php?id=1260625611&web_id=1260625611" type="text/javascript"></script>
  </div>





  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">小土刀</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Agony is my triumph</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-work">
          <a href="/2016/09/11/work-page" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-pencil"></i> <br />
            
            作品
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tech">
          <a href="/2009/09/11/tech-page" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-battery-full"></i> <br />
            
            技术
          </a>
        </li>
      
        
        <li class="menu-item menu-item-life">
          <a href="/1990/09/11/life-page" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-bolt"></i> <br />
            
            生活
          </a>
        </li>
      
        
        <li class="menu-item menu-item-booklist">
          <a href="/1997/09/11/booklist-page" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-diamond"></i> <br />
            
            书单
          </a>
        </li>
      
        
        <li class="menu-item menu-item-thanks">
          <a href="/thanks" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-gift"></i> <br />
            
            关于我
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                【简约之美：软件设计之道】读书笔记
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-09-11T12:34:56+08:00" content="2014-09-11">
              2014-09-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Technique/" itemprop="url" rel="index">
                    <span itemprop="name">Technique</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/09/11/beauty-of-simplicity-clip/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/09/11/beauty-of-simplicity-clip/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
              &nbsp; | &nbsp;
              <span class="page-pv"><i class="fa fa-file-o"></i>
              <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>未来的某些事情，是我们所不知道的。</p>
<a id="more"></a>
<hr>
<h2 id="常识"><a href="#常识" class="headerlink" title="常识"></a>常识</h2><p>《常识》这本小册子说了什么呢？我随便摘录几句。“如果没有人监督，对国王是不能信任的；或者换句话说，渴望保持专制政权的欲念是君主政体的固有弊病。”“独立自主的问题不外乎意味着：究竟是我们将自己制定我们的法律，还是让这个大陆的目前和将来最大的敌人——英王来吩咐我们，除我所喜欢的法律以外不准有任何法律。”“让我们为宪章加冕，从而使世人知道我们是否赞成君主政体，知道北美的法律就是国王。”</p>
<p>我相信，任何一位读者，只要认真看过全书，都会发现《简约之美》其实只强调了几条互相联系的简单道理：软件是必然要变化的，变化是常态；有变化就需要维护，随着时间的推移，维护成本会远远超过初期开发的成本，占据成本的大头；因此，在软件开发中，最重要的是要降低维护成本；维护成本正比于系统的复杂程度，所以要降低维护成本，系统的设计就应当追求简单清晰。</p>
<h3 id="1-1-计算机出了什么问题？"><a href="#1-1-计算机出了什么问题？" class="headerlink" title="1.1　计算机出了什么问题？"></a>1.1　计算机出了什么问题？</h3><p>编程所要用到的艺术和才能——化繁为简。</p>
<h2 id="第2章-缺失的科学"><a href="#第2章-缺失的科学" class="headerlink" title="第2章　缺失的科学"></a>第2章　缺失的科学</h2><p>软件系统中任何与架构有关的技术决策，以及在开发系统中所做的技术决策，都可以归到“软件设计”的范畴里。</p>
<h3 id="2-1-程序员也是设计师"><a href="#2-1-程序员也是设计师" class="headerlink" title="2.1　程序员也是设计师"></a>2.1　程序员也是设计师</h3><p>每个写代码的人都是设计师，团队里的每个人都有责任保证自己的代码有着良好的设计。任何软件项目里，任何写代码的人，在任何层面上，都不能忽略软件设计。</p>
<p>所有的开发人员都应有权在自己的工作中做出良好的设计决策</p>
<p>身为设计师，必须时时愿意聆听建议和反馈，因为程序员大都比较聪明，有不错的想法。但是考虑了所有这些建议和反馈之后，任何决策都必须由单独的个人而不是一群人来做出。</p>
<h3 id="2-2-软件设计的科学"><a href="#2-2-软件设计的科学" class="headerlink" title="2.2　软件设计的科学"></a>2.2　软件设计的科学</h3><p>科学必须包含汇总而来的知识。也就是，它必须包含事实而不是意见，且这些事实必须汇总起来（比如集结成书）。</p>
<p>这些知识必须具有某种结构。知识必须能分类，其中的各个部分必须能够依据重要性之类的指标，妥善建立起与其他部分的联系。</p>
<p>科学必须包括一般性的事实或者基本的规则。</p>
<p>科学必须告诉你在现实世界中如何做一些事情。它必须能够应用到工作或生活中。</p>
<p>通常，科学是经由科学方法来发现或证明的。科学方法必须观察现实世界，提炼出关于现实世界的理论，通过验证理论，而且这些实验必须是可重复的。这样才能说明理论是普适的真理，而不仅仅是巧合或者特例。</p>
<p>定义告诉你事物是什么，应当如何使用。</p>
<p>事实是关于事物的真实陈述。每一点真实的信息都是事实。</p>
<p>条例是给你的确切建议，它包含某些具体的信息，用于制订决策。但是，条例并不能帮你绝对准确地预测未来，也不能帮你发现其他真理。它们通常会告诉你是否需要采取某些行动。</p>
<p>规则是永远为真的事实，它涵盖了很多领域的知识。它们帮你发现其他重要的真理，帮你预测未来要发生的事情。</p>
<p>软件设计是有章（规则）可循的，它们可以被认识，可以被理解。规则是永恒不变的，是基本的事实，而且确实可行。</p>
<h3 id="2-3-为什么不存在软件设计科学"><a href="#2-3-为什么不存在软件设计科学" class="headerlink" title="2.3　为什么不存在软件设计科学"></a>2.3　为什么不存在软件设计科学</h3><p>软件复杂性的主要根源就在于缺乏科学。如果程序员有科学指导，知道该如何开发简单的软件，就不会有这么多的复杂性问题，我们也不需要运用令人发狂的过程来管理这些复杂性。</p>
<h2 id="第3章-软件设计的推动力"><a href="#第3章-软件设计的推动力" class="headerlink" title="第3章　软件设计的推动力"></a>第3章　软件设计的推动力</h2><p>全部软件都有一个相同的目标： 帮助其他人。</p>
<p>不理解“帮助其他人”的程序员，只能写出糟糕的程序，也就是说，他们的程序提供不了什么帮助。实际上，大概存在这么一点理论（根据对大量程序员的长时间观察所得的猜想）：一个人写出优秀软件的潜力，完全取决于他在多大程度上理解了“帮助其他人”的思想。</p>
<p>总之，在设计软件时，应当将目标——帮助他人——视为应该考虑的最重要因素，这样，我们才能认识并了解软件设计的真正科学。</p>
<p>从目标看，我们知道开发软件是为了帮助其他人。所以，软件设计科学的目标应该是： 确保软件能提供尽可能多的帮助。其次，我们通常希望软件可以给大家提供持续的帮助。所以，第二个目标是： 确保软件能持续提供尽可能多的帮助。</p>
<p>设计程序员能尽可能简单地开发和维护的软件系统，这样的系统才能为用户提供尽可能多的帮助，而且能持续提供尽可能多的帮助。</p>
<h3 id="4-1-软件设计的方程式"><a href="#4-1-软件设计的方程式" class="headerlink" title="4.1　软件设计的方程式"></a>4.1　软件设计的方程式</h3><p>任何一点改变，其合意程度与其价值成正比，与所付出的成本成反比。</p>
<h4 id="4-1-1-价值"><a href="#4-1-1-价值" class="headerlink" title="4.1.1　价值"></a>4.1.1　价值</h4><p>价值由两部分组成：可能价值（这个变化有多大可能帮到用户）、潜在价值（这个变化在对用户提供帮助的时候，将为用户提供多大的帮助）。</p>
<h4 id="4-1-3-维护"><a href="#4-1-3-维护" class="headerlink" title="4.1.3　维护"></a>4.1.3　维护</h4><p>成本包含实现成本和维护成本，价值也包括当前价值和未来价值。</p>
<h4 id="4-1-4-完整的方程式"><a href="#4-1-4-完整的方程式" class="headerlink" title="4.1.4　完整的方程式"></a>4.1.4　完整的方程式</h4><p>改变的合意程度（可行性），正比于软件当前价值与未来价值之和，反比于实现成本和维护成本之和。</p>
<h4 id="4-1-6-你需要什么，不需要什么"><a href="#4-1-6-你需要什么，不需要什么" class="headerlink" title="4.1.6　你需要什么，不需要什么"></a>4.1.6　你需要什么，不需要什么</h4><p>相比降低实现成本，降低维护成本更加重要。 在软件设计的科学中，这是非常重要的一点。</p>
<h3 id="4-2-设计的质量"><a href="#4-2-设计的质量" class="headerlink" title="4.2　设计的质量"></a>4.2　设计的质量</h3><p>设计的质量好坏，正比于该系统在未来能持续帮助他人时间的长度。</p>
<p>把自己禁锢在某种工作定势里，要保持灵活；不要做任何以后无法改变的决策；在设计时要慎重，慎重，再慎重。</p>
<h3 id="4-3-不可预测的结果"><a href="#4-3-不可预测的结果" class="headerlink" title="4.3　不可预测的结果"></a>4.3　不可预测的结果</h3><p>程序员犯的最常见也是最严重的错误，就是在其实不知道未来的时候去预测未来。</p>
<p>重要的是要记住，存在着未来。但是，这不要求你必须预测未来，它只是说明你为什么应当遵循本书的规则和条例来决策——因为无论未来会发生什么，它们总可以保证你的软件不偏离正轨。</p>
<h2 id="第5章-变化"><a href="#第5章-变化" class="headerlink" title="第5章　变化"></a>第5章　变化</h2><p>我们得到了变化定律（Law of Change）： 程序存在的时间越久，它的某个部分需要变化的可能性就越高。</p>
<p>关键在于，你并不需要去预测什么会变化，你需要知道的是，变化必然会发生。程序应该保证尽可能合理的灵活性，这样，不管未来发生什么变化，都可以应付得了</p>
<h3 id="5-2-软件设计的三大误区"><a href="#5-2-软件设计的三大误区" class="headerlink" title="5.2　软件设计的三大误区"></a>5.2　软件设计的三大误区</h3><p>为了适应变化定律，软件设计师常常会掉进误区。其中有3个误区最常见，这里按照其发生频率逐一列出来： （1）编写不必要的代码 （2）代码难以修改（3）过分追求通用</p>
<h4 id="5-2-1-编写不必要的代码"><a href="#5-2-1-编写不必要的代码" class="headerlink" title="5.2.1　编写不必要的代码"></a>5.2.1　编写不必要的代码</h4><p>在需求来临之前就编写代码的另一点危险是，当前用不到的代码很可能会导致“劣化”。因为代码从来没有用到，它很可能与系统的其他部分脱节，继而产生bug，可是你永远也不知道。最终等你想去使用的时候，就得花时间去排错。更糟糕的是，你很可能相信这些从来没用过的代码是正确的而忽略了检查，这样bug就留给了用户。其实，这条规则应当这样展开： 不要编写不是必需的代码，并且要删除没有用到的代码。</p>
<h4 id="5-2-2-代码难以修改"><a href="#5-2-2-代码难以修改" class="headerlink" title="5.2.2　代码难以修改"></a>5.2.2　代码难以修改</h4><p>软件项目的一大杀手就是所谓的“僵化设计”（rigid design）。也就是说，程序员写出来的代码很难修改。僵化设计有两大原因： （1）对未来做太多假设（2）不仔细设计就编写代码</p>
<p>要避免僵化设计，就应当做到： 设计程序时，应当根据你现在确切知道的需求，而不是你认为未来会出现的需求。</p>
<h4 id="5-2-3-过分追求通用"><a href="#5-2-3-过分追求通用" class="headerlink" title="5.2.3　过分追求通用"></a>5.2.3　过分追求通用</h4><p>总的来说，如果你的设计让事情更复杂而不是变简单，就是在做过度工程。如果你只需要清理蚁穴，动用轨道激光就会把事情大大搞复杂，其实只用一点蚂蚁药就可以解决问题（假设它有效）。</p>
<p>在追求通用时，应当选择正确的事情，选择正确的方法，这是成功的软件设计的基础。然而，太过通用，会带来说不完的复杂和混乱，也会大大抬高维护成本。避免此误区的办法，和避免僵化设计的一样： 仅仅根据目前确知的需求来考虑通用。</p>
<h3 id="5-3-渐进式开发及设计"><a href="#5-3-渐进式开发及设计" class="headerlink" title="5.3　渐进式开发及设计"></a>5.3　渐进式开发及设计</h3><p>有个办法可从根本上避免这三大误区，这就是“渐进式开发和设计”。它要求按照特定顺序，一点一点地设计和构建系统。</p>
<p>显然，精益混合了两种做法：一种叫做“渐进开发”，另一种叫做“渐进设计”。渐进开发是一种通过小步骤构建整个系统的办法。在上面的步骤里，“实现”开头的每一步都是渐进开发过程的一部分。渐进设计是一种类似的方法，它也通过一系列小步骤用来创建和改进系统的设计。在上面的步骤里，以“修改”或“设计”开头的每一步，都是渐进设计过程的一部分。渐进开发和设计并不是唯一有效的软件开发方法，但是它无疑可以避免之前列出的三大误区。</p>
<h2 id="第6章-缺陷与设计"><a href="#第6章-缺陷与设计" class="headerlink" title="第6章　缺陷与设计"></a>第6章　缺陷与设计</h2><p>缺陷概率定律”： 在程序中新增缺陷的可能性与代码修改量成正比。</p>
<p>最好的设计，就是能适应外界尽可能多的变化，而软件自身的变化要尽可能少。</p>
<h3 id="6-1-如果这不是问题……"><a href="#6-1-如果这不是问题……" class="headerlink" title="6.1　如果这不是问题……"></a>6.1　如果这不是问题……</h3><p>永远不要“修正”任何东西，除非它真的有问题，而且有证据表明问题确实存在。</p>
<h3 id="6-2-避免重复"><a href="#6-2-避免重复" class="headerlink" title="6.2　避免重复"></a>6.2　避免重复</h3><p>在软件设计中，这或许是最著名的条例。其他资料也曾提过该条例，鉴于它的重要性，我们在这里重申： 理想情况下，任何系统里的任何信息，都应当只存在一次。</p>
<p>众多优秀设计都基于这一规律。也就是说，你能更聪明地让代码“使用”其他代码，把信息集中运用好，那么设计也就更好。在这一领域，你同样可以真正用自己的聪明才智为编程创造价值。</p>
<h2 id="第7章-简洁"><a href="#第7章-简洁" class="headerlink" title="第7章　简洁"></a>第7章　简洁</h2><p>这就是简洁定律（Law of Simplicity）： 软件任何一部分的维护难度，反比于该部分的简洁程度。</p>
<h3 id="7-4-保持一致"><a href="#7-4-保持一致" class="headerlink" title="7.4　保持一致"></a>7.4　保持一致</h3><p>如果代码不能保持一致，程序员理解和阅读起来都要更加困难。</p>
<p>编程也是这样——缺乏一致性，只会一团糟。有了一致性，世界就很简单。即便你做不到那么简单，至少也要做到：一旦你理解了某种复杂性，就不必再进行重复劳动。</p>
<h3 id="7-5-可读性"><a href="#7-5-可读性" class="headerlink" title="7.5　可读性"></a>7.5　可读性</h3><p>代码可读性主要取决于字母和符号之间的空白排布。</p>
<h4 id="7-5-1-命名"><a href="#7-5-1-命名" class="headerlink" title="7.5.1　命名"></a>7.5.1　命名</h4><p>可读性的另一部分重要内容是为变量、函数、类等选择合适的名字，理想的命名应该这样： 名字应当足够长，能够完整表达其意义或描述其功能，但不能太长，以免影响阅读。</p>
<h4 id="7-5-2-注释"><a href="#7-5-2-注释" class="headerlink" title="7.5.2　注释"></a>7.5.2　注释</h4><p>保证代码的可读性，好的的注释也很重要。但是，代码的意图通常不应该用注释来说明，直接阅读代码就应当能够理解。如果发现意图不够明显，那么就说明这段代码还可以变得更简单。如果你的代码实在不能更简单，才应该写注释来说明。</p>
<p>注释的真实目的，是在理由不够清晰明显时加以解释。如果不解释，其他程序员在修改这段代码时可能会很困惑；如果不明白这些理由，他们可能会删改其中重要的部分。</p>
<h2 id="第8章-复杂性"><a href="#第8章-复杂性" class="headerlink" title="第8章　复杂性"></a>第8章　复杂性</h2><p>有些项目从一启动就设定了繁多的需求，所以永远无法发布第一版。如果遇到这种情况，就应当删减功能。初次发布不应当设定过高的目标，而应当先让程序跑起来，再持续改进。</p>
<p>除了新增功能，其他一些做法也会增加复杂性，以下列出了最常见的做法。</p>
<ol>
<li>扩展软件的用途 一般情况下，应当绝对禁止这样做。市场部可能巴望着某款软件既能够计算个税，又可以充当菜谱，这样的需求，你必须尽全力抵制。软件应当坚守已经确定的用途，只要妥善完成这些目标，你就会获得成功（前提是该软件能帮到用户，切实满足其需求）。</li>
<li>新增程序员 没错，往团队里增加新人并不会让事情变简单，相反会更复杂。Fred Brooks的名作《人月神话》说的就是这个道理。如果已经有了10个开发人员，再增加1个人，就意味着需要为他设定合适的岗位，花时间让之前的10个人适应新人，花时间让新人学会与那10个人沟通，如此等等。相比众多平庸的开发人员，少量精干的开发人员更容易获得成功。</li>
<li>做无谓的改变 每做一点改变，都会增加复杂性。无论是需求变化、设计变化，或是只修改某段代码，都有可能增加新的bug，另外别忘了算上决定如何变化所需的时间，实现它所需的时间，验证它是否影响到原有系统所需的时间，记录它的时间，测试它的时间。每做一点新变化，整体复杂性就会增加一点，所以变化越多，每个变化要花的时间就越长。做出某些变化是重要的，但是应当谨慎决策，而不是一拍脑瓜就定了。</li>
<li>困于糟糕的技术 一般来说，“困于糟糕的技术”指的是你之前决定了采用某种技术，因为极度依赖它，长期无法摆脱。这里说的“糟糕”，意思是你深陷其中（未来无法简单地切换到其他技术），不能灵活地适应未来的需求，或是达不到设计简洁软件所需的质量标准。</li>
<li>理解错误 程序员不理解自己的工作，就容易设计出复杂的系统。这可能是恶性循环：理解错误导致复杂性，复杂性又进一步加剧理解错误，如此往复。提升设计水平的最主要办法是，确保自己完全理解所用的系统和工具。你对它们的理解越到位，对软件开发的一般规律了解越多，你的设计就越简洁。</li>
<li>糟糕的设计或不做设计 一般来说，它指的是“没有为变化做计划”。万物都是会变化的，项目增长时，设计仍然要维持简单。你必须一开始就做好设计，而且在系统膨胀时不断进行优秀的设计；否则，复杂性就会迅速增长，因为如果设计得不好，每项功能都会让代码加倍复杂，而不是只复杂一点点。</li>
<li>重新发明轮子 如果有相当不错的现成协议，还要自己发明协议，那么仅仅为了把软件跑起来，这些协议也会花去你大量的时间。决不要什么都靠自力更生，去自己开发什么Web服务器、协议或者重要的类库，除非它们是你的最终产品。只有在满足以下任何一个条件的前提下，重新发明轮子才有价值： （1）你需要的东西不存在；（2）现有的各种“轮子”都很糟糕，会把你困住； （3）现有的“轮子”根本无法满足你的需求；（4）现有的“轮子”缺乏良好的维护，而你也不能接过维护的任务（比如，你没有源代码）。</li>
</ol>
<h3 id="8-2-糟糕的技术"><a href="#8-2-糟糕的技术" class="headerlink" title="8.2　糟糕的技术"></a>8.2　糟糕的技术</h3><p>出现复杂性的另一个常见原因就是，系统里选择了错误的技术，尤其是最终发现并不能很好适应未来需求的技术。但是既然无法预测未来，现在就决定要选择什么技术并不简单。好在，开始使用之前，你可以通过三个因素来判断技术是否“糟糕”：生存潜力、互通性、对品质的重视。</p>
<h3 id="8-4-复杂问题"><a href="#8-4-复杂问题" class="headerlink" title="8.4 复杂问题"></a>8.4 复杂问题</h3><p>如果你在解决复杂问题时遇到了麻烦，那么用简单易懂的文字把它写在纸上，或者画出来。有些最优秀的程序设计就是在纸上完成的，真的。把它输入到计算机里只是次要的细节。 大多数麻烦的设计问题，都可以用在纸上画图或写出来的办法找到答案。</p>
<h3 id="8-6-推倒重来"><a href="#8-6-推倒重来" class="headerlink" title="8.6　推倒重来"></a>8.6　推倒重来</h3><p>如果下面的条件全都满足，你才应该重写。</p>
<ol>
<li>你已经完成了准确评估，证明重写整个系统会比重新设计现有系统更有效率。只有猜测是不够的，你需要真正去做一些重新设计现有系统的试验，然后对比结果。已有的复杂系统可能很难应付，某些部分可能很难处理，但是为了知道修复它需要多少时间，你必须动手做一些尝试。</li>
<li>你有足够的时间用来开发新的系统。</li>
<li>你要比原有系统的设计师更高明，或者，如果原有系统是你设计的，但现在你的设计能力已经大大提升了。</li>
<li>你完全打算好了通过一系列简单的步骤设计整个新系统，在每一步都有用户提供反馈。</li>
<li>你有足够的资源，可兼顾维护原有系统和重新设计系统。绝对不要为了让程序员重写新系统而停止对原有系统的维护。系统只要在使用，都离不开维护。请记住，你自己的精力也是一种资源，必须慎重分配——如果两线作战，你每天有足够的时间分配给原有系统和新系统吗？</li>
</ol>
<p>如果上面的条件都满足，那么推倒重来是可以接受的。否则，应该做的事情不是推倒重来，而是降低现有系统的复杂性，也就是通过一系列简单步骤来改进系统的设计。</p>
<h2 id="第9章-测试"><a href="#第9章-测试" class="headerlink" title="第9章　测试"></a>第9章　测试</h2><p>测试法则（Law of Testing）告诉我们： 你对软件行为的了解程度，等于你真正测试它的程度。</p>
<p>总的来说，你可以这么理解： 除非亲自测试过，否则你不知道软件是否能正常运行。</p>
<h2 id="附录A-软件设计的规则"><a href="#附录A-软件设计的规则" class="headerlink" title="附录A　软件设计的规则"></a>附录A　软件设计的规则</h2><ul>
<li>变化定律：程序存在的时间越久，它的某个部分需要变化的可能性越大。</li>
<li>缺陷定律：在程序中新增缺陷的可能性与代码修改量成正比。</li>
<li>简洁定律：软件任何一部分的维护难度，反比于该部分的简洁程度。</li>
<li>测试定律：你对软件行为的了解程度，等于你真正测试它的程度。</li>
</ul>
<p>如果你希望把最重要的事实综合成软件设计时要记得的两句话，就是：</p>
<ul>
<li>相比降低开发成本，降低维护成本更加重要。 维护成本正比于系统的复杂程度。</li>
<li>有了这两条，以及对软件目的的了解，再加上你知道整个系统的复杂性源自各部分的复杂性，你就有相当的把握去重新认识软件设计这整门科学。</li>
</ul>
<h2 id="附录B-事实、规则、条例、定义"><a href="#附录B-事实、规则、条例、定义" class="headerlink" title="附录B　事实、规则、条例、定义"></a>附录B　事实、规则、条例、定义</h2><p>本附录列出了本书所涵盖的各条重要的事实、规则、条例、定义。</p>
<p>事实：好程序员和差程序员的差别就在于理解能力。差劲的程序员不理解自己做的事情，优秀的程序员则相反。</p>
<p>条例：“好程序员”应当竭尽全力，把程序写得让其他程序员容易理解。 定义：程序就是 给计算机的一系列指令； 计算机依据指令进行的操作；</p>
<p>定义：软件系统中任何与架构有关的技术决策，以及在开发系统中所做的技术决策，都可以归到“软件设计”的范畴里。 事实：每个写代码的人都是设计师。</p>
<p>事实：设计与民主无关，它应当由个人完成。 事实：软件设计是有章（规则）可循的，它们可以被认识，可以被理解。规则是恒久不变的，是基本的事实，而且确实可行。</p>
<p>规则：软件的目的就是帮助其他人。 事实：软件设计的目的如下。 确保软件能提供尽可能多的帮助； 确保软件能持续提供尽可能多的帮助；</p>
<p>设计程序员能尽可能简单地开发和维护的软件系统，这样的系统才能为用户提供尽可能多的帮助，而且能持续提供尽可能多的帮助。</p>
<p>这说明，降低维护成本比降低开发成本更重要。</p>
<ul>
<li>条例：要做多少设计，应当正比于未来软件能够持续为人们提供帮助的时间的长度。</li>
<li>条例：未来的某些事情，是我们所不知道的。</li>
<li>事实：程序员犯的最常见也是最严重的错误，就是在其实不知道未来的时候去预测未来。</li>
<li>条例：最安全的情况是，完全不尝试预测未来，所有的设计决策都应当根据当前确切知道的信息来做。</li>
<li>条例：变化定律：程序存在的时间越久，它的某个部分需要变化的可能性越大。 事实：在落实变化法则时，软件设计师容易犯的三个错误（也就是本书中的“三大缺陷”）是：</li>
<li>编写不必要的代码 代码难以修改 过分追求通用 条例：直到真正要用了才编写代码，清理掉用不到的代码。</li>
<li>条例：代码的设计基础，应当是目前所知的信息，而不是你认为未来要发生的情况。 事实：如果设计让事情更复杂，而不是更简单，就犯了过度工程的错误。</li>
<li>条例：在考虑通用时，只需要考虑当前的通用需求。 条例：采用渐进式开发和设计，可以避免三大缺陷。</li>
<li>条例：缺陷概率法则：在程序新增缺陷的可能性与代码修改量成正比。 条例：最好的设计，就是能适应外界尽可能多的变化，而软件自身的变化要尽可能少。</li>
<li>条例：永远不要“修正”任何东西，除非它真的有问题，而且有证据表明问题确实存在。 条例：理想情况下，任何系统里的任何信息，都应当只存在一次。</li>
<li>规则：简洁定律：软件任何一部分的维护难度，反比于该部分的简洁程度。 事实：简洁是相对的。 条例：如果你真的希望成功，最好是把产品简化到傻子也能懂。</li>
<li>条例：要保持一致。 条例：代码可读性主要取决于字母和符号之间的空白排布。 条例：名字应当足够长，能够完整表达其意义或描述其功能，但不能太长，以免影响阅读。</li>
<li>条例：代码应当解释程序为什么这么做，而不是它在做什么。</li>
<li>条例：简洁离不开设计。</li>
<li>条例：你可以这样增加复杂性： 扩展软件的用途； 新增程序员； 做无谓的改变； 困于糟糕的技术； 理解错误； 糟糕的设计或者不做设计；重新发明轮子； 背离软件原来的用途； 条例：可以通过考察生存潜力、互通性、对品质的重视，判断某种技术是否“糟糕”。</li>
<li>条例：通常，如果某件事情变得非常复杂，也就意味着深藏在表面的复杂之下，设计出了问题。 条例：在复杂性面前，问问自己“真正要解决的问题是什么”。</li>
<li>条例：大多数麻烦的设计问题，都可以用在纸上画图或写出来的办法找到答案。 条例：要应付系统中的复杂性，可以将系统分解成独立的小部分，逐步重新设计。</li>
<li>事实：所有可行的简化，其核心问题都是：怎么做，才可以让事情处理或是理解起来更容易。</li>
<li>条例：如果遇到不可解决的复杂性，在程序外面妥善包装上一层，让其他程序员更容易使用和理解。 条例：推倒重来只有在一些非常有限的情况下才是可以接受的。</li>
<li>规则：测试定律：你对软件行为的了解程度，等于你真正测试它的程度。 条例：除非亲自测试过，否则你不知道软件是否能正常运行。</li>
</ul>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>您的支持是对我创作最大的鼓励！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/misc/wechat.jpg" alt="wdxtub WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/misc/alipay.jpg" alt="wdxtub Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/设计/" rel="tag">#设计</a>
          
            <a href="/tags/简约/" rel="tag">#简约</a>
          
            <a href="/tags/方法/" rel="tag">#方法</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2014/09/11/old-new-revolution-clip/" rel="next" title="【旧制度与大革命】读书笔记">
                <i class="fa fa-chevron-left"></i> 【旧制度与大革命】读书笔记
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2014/09/11/gu-long-collection-clip/" rel="prev" title="【古龙合集】读书笔记">
                【古龙合集】读书笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          

  <p>热评文章</p>
  <div class="ds-top-threads" data-range="weekly" data-num-items="4"></div>


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2014/09/11/beauty-of-simplicity-clip/"
           data-title="【简约之美：软件设计之道】读书笔记" data-url="http://wdxtub.com/2014/09/11/beauty-of-simplicity-clip/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/misc/avatar.jpg"
               alt="wdxtub" />
          <p class="site-author-name" itemprop="name">wdxtub</p>
          <p class="site-description motion-element" itemprop="description">人文/科学/读书/写作/思考/编程/架构/数据/广交朋友/@SYSU/@CMU</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">710</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">874</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/wdxtub" target="_blank" title="GitHub">
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/wdxtub" target="_blank" title="微博">
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://douban.com/people/wdx" target="_blank" title="豆瓣">
                  
                  豆瓣
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/wdxtub" target="_blank" title="知乎">
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              不妨看看
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://zhchbin.github.io/" title="zhchbin" target="_blank">zhchbin</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.algorithmdog.com/" title="算法狗" target="_blank">算法狗</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.52cs.org/" title="我爱计算机" target="_blank">我爱计算机</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://jackqdyulei.github.io/" title="雷雷" target="_blank">雷雷</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://guojiex.github.io/" title="瓜瓜" target="_blank">瓜瓜</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://wdxtub.lofter.com/" title="我的 Lofter" target="_blank">我的 Lofter</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://wdxtub.com/interview/" title="刷题笔记" target="_blank">刷题笔记</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#常识"><span class="nav-number">1.</span> <span class="nav-text">常识</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-计算机出了什么问题？"><span class="nav-number">1.1.</span> <span class="nav-text">1.1　计算机出了什么问题？</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第2章-缺失的科学"><span class="nav-number">2.</span> <span class="nav-text">第2章　缺失的科学</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-程序员也是设计师"><span class="nav-number">2.1.</span> <span class="nav-text">2.1　程序员也是设计师</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-软件设计的科学"><span class="nav-number">2.2.</span> <span class="nav-text">2.2　软件设计的科学</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-为什么不存在软件设计科学"><span class="nav-number">2.3.</span> <span class="nav-text">2.3　为什么不存在软件设计科学</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第3章-软件设计的推动力"><span class="nav-number">3.</span> <span class="nav-text">第3章　软件设计的推动力</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-软件设计的方程式"><span class="nav-number">3.1.</span> <span class="nav-text">4.1　软件设计的方程式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-1-价值"><span class="nav-number">3.1.1.</span> <span class="nav-text">4.1.1　价值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-3-维护"><span class="nav-number">3.1.2.</span> <span class="nav-text">4.1.3　维护</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-4-完整的方程式"><span class="nav-number">3.1.3.</span> <span class="nav-text">4.1.4　完整的方程式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-6-你需要什么，不需要什么"><span class="nav-number">3.1.4.</span> <span class="nav-text">4.1.6　你需要什么，不需要什么</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-设计的质量"><span class="nav-number">3.2.</span> <span class="nav-text">4.2　设计的质量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-不可预测的结果"><span class="nav-number">3.3.</span> <span class="nav-text">4.3　不可预测的结果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第5章-变化"><span class="nav-number">4.</span> <span class="nav-text">第5章　变化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-软件设计的三大误区"><span class="nav-number">4.1.</span> <span class="nav-text">5.2　软件设计的三大误区</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-1-编写不必要的代码"><span class="nav-number">4.1.1.</span> <span class="nav-text">5.2.1　编写不必要的代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-2-代码难以修改"><span class="nav-number">4.1.2.</span> <span class="nav-text">5.2.2　代码难以修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-3-过分追求通用"><span class="nav-number">4.1.3.</span> <span class="nav-text">5.2.3　过分追求通用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-渐进式开发及设计"><span class="nav-number">4.2.</span> <span class="nav-text">5.3　渐进式开发及设计</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第6章-缺陷与设计"><span class="nav-number">5.</span> <span class="nav-text">第6章　缺陷与设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-如果这不是问题……"><span class="nav-number">5.1.</span> <span class="nav-text">6.1　如果这不是问题……</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-避免重复"><span class="nav-number">5.2.</span> <span class="nav-text">6.2　避免重复</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第7章-简洁"><span class="nav-number">6.</span> <span class="nav-text">第7章　简洁</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-保持一致"><span class="nav-number">6.1.</span> <span class="nav-text">7.4　保持一致</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-5-可读性"><span class="nav-number">6.2.</span> <span class="nav-text">7.5　可读性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-5-1-命名"><span class="nav-number">6.2.1.</span> <span class="nav-text">7.5.1　命名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-5-2-注释"><span class="nav-number">6.2.2.</span> <span class="nav-text">7.5.2　注释</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第8章-复杂性"><span class="nav-number">7.</span> <span class="nav-text">第8章　复杂性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-糟糕的技术"><span class="nav-number">7.1.</span> <span class="nav-text">8.2　糟糕的技术</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-复杂问题"><span class="nav-number">7.2.</span> <span class="nav-text">8.4 复杂问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-6-推倒重来"><span class="nav-number">7.3.</span> <span class="nav-text">8.6　推倒重来</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第9章-测试"><span class="nav-number">8.</span> <span class="nav-text">第9章　测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#附录A-软件设计的规则"><span class="nav-number">9.</span> <span class="nav-text">附录A　软件设计的规则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#附录B-事实、规则、条例、定义"><span class="nav-number">10.</span> <span class="nav-text">附录B　事实、规则、条例、定义</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wdxtub</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"wdxblog"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementById('footer')
      || document.getElementById('footer')).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
      <script src="/js/src/hook-duoshuo.js"></script>
    
  





  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src=""></script>


  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


</body>
</html>

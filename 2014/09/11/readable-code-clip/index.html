<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.lug.ustc.edu.cn/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="代码,风格,可读," />





  <link rel="alternate" href="/atom.xml" title="小土刀" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="与其把我们主要的任务想象成指示计算机做什么，不如让我们关注解释给人类我们希望让计算机做什么。">
<meta property="og:type" content="article">
<meta property="og:title" content="【编写可读代码的艺术】读书笔记">
<meta property="og:url" content="http://wdxtub.com/2014/09/11/readable-code-clip/index.html">
<meta property="og:site_name" content="小土刀">
<meta property="og:description" content="与其把我们主要的任务想象成指示计算机做什么，不如让我们关注解释给人类我们希望让计算机做什么。">
<meta property="og:updated_time" content="2016-05-27T22:48:15.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【编写可读代码的艺术】读书笔记">
<meta name="twitter:description" content="与其把我们主要的任务想象成指示计算机做什么，不如让我们关注解释给人类我们希望让计算机做什么。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 4016951,
      author: '博主'
    }
  };
</script>

  <title> 【编写可读代码的艺术】读书笔记 | 小土刀 </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <!-- hexo-inject:begin --><!-- hexo-inject:end --><script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=59042340";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <div style="display: none;">
    <script src="http://s6.cnzz.com/stat.php?id=1260625611&web_id=1260625611" type="text/javascript"></script>
  </div>





  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">小土刀</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Agony is my triumph</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-work">
          <a href="/2016/09/11/work-page" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-pencil"></i> <br />
            
            作品
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tech">
          <a href="/2009/09/11/tech-page" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-battery-full"></i> <br />
            
            技术
          </a>
        </li>
      
        
        <li class="menu-item menu-item-life">
          <a href="/1990/09/11/life-page" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-bolt"></i> <br />
            
            生活
          </a>
        </li>
      
        
        <li class="menu-item menu-item-booklist">
          <a href="/1997/09/11/booklist-page" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-diamond"></i> <br />
            
            书单
          </a>
        </li>
      
        
        <li class="menu-item menu-item-thanks">
          <a href="/thanks" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-gift"></i> <br />
            
            关于我
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                【编写可读代码的艺术】读书笔记
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-09-11T12:34:56+08:00" content="2014-09-11">
              2014-09-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Technique/" itemprop="url" rel="index">
                    <span itemprop="name">Technique</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/09/11/readable-code-clip/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/09/11/readable-code-clip/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
              &nbsp; | &nbsp;
              <span class="page-pv"><i class="fa fa-file-o"></i>
              <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>与其把我们主要的任务想象成指示计算机做什么，不如让我们关注解释给人类我们希望让计算机做什么。</p>
<a id="more"></a>
<hr>
<p>程序员之间的互相尊重体现在他所写的代码中。他们对工作的尊重也体现在那里。</p>
<ul>
<li>表面层次上的改进<ul>
<li>命名、注释以及审美——可以用于代码库每一行的小提示。</li>
</ul>
</li>
<li>简化循环和逻辑<ul>
<li>在程序中定义循环、逻辑和变量，从而使得代码更容易理解。</li>
</ul>
</li>
<li>重新组织你的代码<ul>
<li>在更高层次上组织大的代码块以及在功能层次上解决问题的方法。</li>
</ul>
</li>
<li>精选话题<ul>
<li>把”易于理解”的思想应用于测试以及大数据结构代码的例子。</li>
</ul>
</li>
</ul>
<h2 id="代码应当易于理解"><a href="#代码应当易于理解" class="headerlink" title="代码应当易于理解"></a>代码应当易于理解</h2><p>可读性基本定理</p>
<ul>
<li>关键思想<ul>
<li>代码的写法应当使别人理解它所需的时间最小化。</li>
<li>当我们说“理解”时，我们对这个词有个很高的标准。如果有人真的完全理解了你的代码，他就应该能改动它、找出缺陷并且明白它是如何与你代码的其他部分交互的。</li>
</ul>
</li>
<li>总是越小越好吗<ul>
<li>因此尽管减少代码行数是一个好目标，但把理解代码所需的时间最小化是一个更好的目标。</li>
</ul>
</li>
</ul>
<h2 id="表面层次的改进"><a href="#表面层次的改进" class="headerlink" title="表面层次的改进"></a>表面层次的改进</h2><p>我们的可读性之旅从我们认为“表面层次”的改进开始：选择好的名字、写好的注释以及把代码整洁地写成更好的格式。这些改变很容易应用。你可以在“原位”做这些改变而不必重构代码或者改变程序的运行方式。你还可以增量地做这些修改却不需要投入大量的时间。</p>
<h2 id="把信息装到名字里"><a href="#把信息装到名字里" class="headerlink" title="把信息装到名字里"></a>把信息装到名字里</h2><p>无论是命名变量、函数还是类，都可以使用很多相同的原则。我们喜欢把名字当做一条小小的注释。尽管空间不算很大，但选择一个好名字可以让它承载很多信息。</p>
<ul>
<li>关键思想<ul>
<li>把信息装入名字中。</li>
</ul>
</li>
</ul>
<p>本章分成6个专题：</p>
<ul>
<li>选择专业的词。</li>
<li>避免泛泛的名字（或者说要知道什么时候使用它）。</li>
<li>用具体的名字代替抽象的名字。</li>
<li>使用前缀或后缀来给名字附带更多信息。</li>
<li>决定名字的长度。</li>
<li>利用名字的格式来表达含义</li>
</ul>
<h3 id="选择专业的词"><a href="#选择专业的词" class="headerlink" title="选择专业的词"></a>选择专业的词</h3><p>“把信息装入名字中”包括要选择非常专业的词，并且避免使用“空洞”的词。</p>
<p>例如，“get”这个词就非常不专业，例如在下面的例子中：</p>
<pre><code>def GetPage(url): ...
</code></pre><p>“get”这个词没有表达出很多信息。这个方法是从本地的缓存中得到一个页面，还是从数据库中，或者从互联网中？如果是从互联网中，更专业的名字可以是<code>FetchPage()</code>或者<code>DownloadPage()</code>。</p>
<p>下面是一个BinaryTree类的例子：</p>
<pre><code>class BinaryTree
{ int Size();
...
};
</code></pre><p>你期望<code>Size()</code>方法返回什么呢？树的高度，节点数，还是树在内存中所占的空间？问题是<code>Size()</code>没有承载很多信息。更专业的词可以是<code>Height()</code>、<code>NumNodes()</code>或者<code>MemoryBytes()</code>。</p>
<p>另外一个例子，假设你有某种Thread类：</p>
<pre><code>class Thread
{ void Stop();
    ...
};
</code></pre><p><code>Stop()</code>这个名字还可以，但根据它到底做什么，可能会有更专业的名字。例如，你可以叫它<code>Kill()</code>，如果这是一个重量级操作，不能恢复。或者你可以叫它<code>Pause()</code>，如果有方法让它<code>Resume()</code>。</p>
<ul>
<li>send<ul>
<li>deliver、dispatch、announce、distribute、route</li>
</ul>
</li>
<li>find<ul>
<li>search、extract、locate、recover</li>
</ul>
</li>
<li>start<ul>
<li>launch、create、begin、open</li>
</ul>
</li>
<li>make<ul>
<li>create、set up、build、generate、compose、add、new</li>
</ul>
</li>
</ul>
<p>关键思想：清晰和精确比装可爱好。</p>
<ul>
<li>避免像tmp和retval这样泛泛的名字<ul>
<li>使用像tmp、retval和foo这样的名字往往是“我想不出名字”的托辞。与其使用这样空洞的名字，不如挑一个能描述这个实体的值或者目的的名字。</li>
</ul>
</li>
<li>retval这个名字没有包含很多信息。用一个描述该变量的值的名字来代替它。</li>
<li>tmp这个名字只应用于短期存在且临时性为其主要存在因素的变量。</li>
<li>如果你要使用像tmp、it或者retval这样空泛的名字，那么你要有个好的理由。</li>
</ul>
<hr>
<ul>
<li>为名字附带更多信息<ul>
<li>如果你的变量是一个度量的话（如时间长度或者字节数），那么最好把名字带上它的单位。</li>
</ul>
</li>
<li>名字应该有多长<ul>
<li>当选择好名字时，有一个隐含的约束是名字不能太长。</li>
</ul>
</li>
</ul>
<p>当你去短期度假时，你带的行李通常会比长假少。同样，“作用域”小的标识符（对于多少行其他代码可见）也不用带上太多信息。也就是说，因为所有的信息（变量的类型、它的初值、如何析构等）都很容易看到，所以可以用很短的名字。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>本章唯一的主题是：把信息塞入名字中。这句话的含意是，读者仅通过读到名字就可以获得大量信息。</p>
<p>下面是讨论过的几个小提示：</p>
<ul>
<li>使用专业的单词——例如，不用Get，而用Fetch或者Download可能会更好，这由上下文决定。</li>
<li>避免空泛的名字，像tmp和retval，除非使用它们有特殊的理由。</li>
<li>使用具体的名字来更细致地描述事物——Server Can Start()这个名字就比CanListenOnPort更不清楚。</li>
<li>给变量名带上重要的细节——例如，在值为毫秒的变量后面加上<code>_ms</code>，或者在还需要转义的，未处理的变量前面加上<code>raw_</code>。</li>
<li>为作用域大的名字采用更长的名字——不要用让人费解的一个或两个字母的名字来命名在几屏之间都可见的变量。对于只存在于几行之间的变量用短一点的名字更好。</li>
<li>有目的地使用大小写、下划线等——例如，你可以在类成员和局部变量后面加上”_”来区分它们。</li>
</ul>
<h2 id="不会误解的名字"><a href="#不会误解的名字" class="headerlink" title="不会误解的名字"></a>不会误解的名字</h2><p>关键思想: 要多问自己几遍：“这个名字会被别人解读成其他的含义吗？”要仔细审视这个名字。</p>
<p>例子：<code>Clip(text, length)</code></p>
<ul>
<li>命名极限最清楚的方式是在要限制的东西前加上<code>max_</code>或者<code>min_</code>。</li>
<li>推荐用first和last来表示包含的范围</li>
<li>推荐用first和last来表示包含的范围</li>
<li>推荐用begin和end来表示包含/排除范围</li>
</ul>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><ul>
<li>当要定义一个值的上限或下限时，<code>max_</code>和<code>min_</code>是很好的前缀。对于包含的范围，first和last是好的选择。对于包含/排除范围，begin和end是最好的选择，因为它们最常用。</li>
<li>当为布尔值命名时，使用is和has这样的词来明确表示它是个布尔值，避免使用反义的词（例如disable_ssl）。</li>
<li>要小心用户对特定词的期望。例如，用户会期望get()或者size()是轻量的方法。</li>
</ul>
<h2 id="审美"><a href="#审美" class="headerlink" title="审美"></a>审美</h2><p>确切地说，有三条原则：</p>
<ul>
<li>使用一致的布局，让读者很快就习惯这种风格。</li>
<li>让相似的代码看上去相似。</li>
<li>把相关的代码行分组，形成代码块。</li>
</ul>
<p><strong>用方法来整理不规则的东西</strong></p>
<p>使代码“看上去漂亮”通常会带来不限于表面层次的改进，它可能会帮你把代码的结构做得更好。</p>
<p><strong>把代码分成“段落”</strong></p>
<p>书面文字要分成段落是由于以下几个原因：</p>
<ul>
<li>它是一种把相似的想法放在一起并与其他想法分开的方法。</li>
<li>它提供了可见的“脚印”，如果没有它，会很容易找不到你读到哪里了。</li>
<li>它便于段落之间的导航。</li>
<li>因为同样的原因，代码也应当分成“段落”。</li>
</ul>
<h3 id="个人风格与一致性"><a href="#个人风格与一致性" class="headerlink" title="个人风格与一致性"></a>个人风格与一致性</h3><p>关键思想 一致的风格比“正确”的风格更重要。</p>
<h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h3><p>大家都愿意读有美感的代码。通过把代码用一致的、有意义的方式“格式化”，可以把代码变得更容易读，并且可以读得更快。</p>
<p>下面是讨论过的一些具体技巧：</p>
<ul>
<li>如果多个代码块做相似的事情，尝试让它们有同样的剪影。</li>
<li>把代码按“列”对齐可以让代码更容易浏览。</li>
<li>如果在一段代码中提到A、B和C，那么不要在另一段中说B、C和A。选择一个有意义的顺序，并始终用这样的顺序。</li>
<li>用空行来把大块代码分成逻辑上的“段落”。</li>
</ul>
<h2 id="该写什么样的注释"><a href="#该写什么样的注释" class="headerlink" title="该写什么样的注释"></a>该写什么样的注释</h2><p>关键思想 注释的目的是尽量帮助读者了解得和作者一样多。</p>
<p>我们把本章组织成以下几个部分：</p>
<ul>
<li>了解什么不需要注释。</li>
<li>用代码记录你的思想。</li>
<li>站在读者的角度，去想象他们需要知道什么。</li>
</ul>
<h3 id="什么不需要注释"><a href="#什么不需要注释" class="headerlink" title="什么不需要注释"></a>什么不需要注释</h3><p>关键思想</p>
<ul>
<li>不要为那些从代码本身就能快速推断的事实写注释。</li>
<li>不要为了注释而注释</li>
<li>不要给不好的名字加注释——应该把名字改好</li>
</ul>
<p>通常来讲，你不需要“拐杖式注释”——试图粉饰可读性差的代码的注释。写代码的人常常把这条规则表述成：好代码&gt;坏代码+好注释。</p>
<h3 id="记录你的思想"><a href="#记录你的思想" class="headerlink" title="记录你的思想"></a>记录你的思想</h3><p>代码始终在演进，并且在这过程中肯定会有瑕疵。不要不好意思把这些瑕疵记录下来。</p>
<p>标记 通常的意义</p>
<ul>
<li>TODO：我还没有处理的事情</li>
<li>FIXME：已知的无法运行的代码</li>
<li>HACK：对一个问题不得不采用的比较粗糙的解决方案</li>
<li>XXX：危险！这里有重要的问题</li>
</ul>
<p>有些常量不需要注释，因为它们的名字本身已经很清楚（例如<code>SECONDS_PER_DAY</code>）。但是在我们的经验中，很多常量可以通过加注释得以改进。这不过是匆匆记下你在决定这个常量值时的想法而已。</p>
<h3 id="站在读者的角度"><a href="#站在读者的角度" class="headerlink" title="站在读者的角度"></a>站在读者的角度</h3><p>当为一个函数或者类写文档时，可以问自己这样的问题：“这段代码有什么出人意料的地方？会不会被误用？”基本上就是说你需要“未雨绸缪”，预料到人们使用你的代码时可能会遇到的问题。</p>
<p>对于团队的新成员来讲，最难的事情之一就是理解“全局观”——类之间如何交互，数据如何在整个系统中流动，以及入口点在哪里。设计系统的人经常忘记给这些东西加注释，“只缘身在此山中”。</p>
<p>我们的建议是你可以做任何能帮助读者更容易理解代码的事。这可能也会包含对于“做什么”、“怎么做”或者“为什么”的注释（或者同时注释这三个方面）。</p>
<h3 id="最后的思考——克服“作者心理阻滞”"><a href="#最后的思考——克服“作者心理阻滞”" class="headerlink" title="最后的思考——克服“作者心理阻滞”"></a>最后的思考——克服“作者心理阻滞”</h3><p>请注意我们把写注释这件事拆成了几个简单的步骤：</p>
<ol>
<li>不管你心里想什么，先把它写下来。</li>
<li>读一下这段注释，看看有没有什么地方可以改进。</li>
<li>不断改进。</li>
</ol>
<p>当你经常写注释，你就会发现步骤1所产生的注释变得越来越好，最后可能不再需要做任何修改了。并且通过早写注释和常写注释，你可以避免在最后要写一大堆注释这种令人不快的状况。</p>
<p>什么地方不需要注释：</p>
<ul>
<li>能从代码本身中迅速地推断的事实。</li>
<li>用来粉饰烂代码（例如蹩脚的函数名）的“拐杖式注释”——应该把代码改</li>
</ul>
<p>你应该记录下来的想法包括：</p>
<ul>
<li>对于为什么代码写成这样而不是那样的内在理由（“指导性批注”）。</li>
<li>代码中的缺陷，使用像TODO:或者XXX:这样的标记。</li>
<li>常量背后的故事，为什么是这个值。</li>
</ul>
<p>站在读者的立场上思考：</p>
<ul>
<li>预料到代码中哪些部分会让读者说：“啊？”并且给它们加上注释。</li>
<li>为普通读者意料之外的行为加上注释。</li>
<li>在文件/类的级别上使用“全局观”注释来解释所有的部分是如何一起工作的。</li>
<li>用注释来总结代码块，使读者不致迷失在细节中。</li>
</ul>
<h3 id="写出言简意赅的注释"><a href="#写出言简意赅的注释" class="headerlink" title="写出言简意赅的注释"></a>写出言简意赅的注释</h3><p>如果你要写注释，最好把它写得精确——越明确和细致越好。另外，由于注释在屏幕上也要占很多的地方，并且需要花更多的时间来读，因此，注释也需要很紧凑。</p>
<p>关键思想</p>
<ul>
<li>注释应当有很高的信息/空间率。</li>
<li>避免使用不明确的代词</li>
</ul>
<h3 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a>总结</h3><p>本章是关于如何把更多的信息装入更小的空间里。下面是一些具体的提示：</p>
<ul>
<li>当像“it”和“this”这样的代词可能指代多个事物时，避免使用它们。</li>
<li>尽量精确地描述函数的行为。</li>
<li>在注释中用精心挑选的输入/输出例子进行说明。</li>
<li>声明代码的高层次意图，而非明显的细节。</li>
<li>用嵌入的注释（如<code>Function(/*arg =*/...)</code>）来解释难以理解的函数参数。</li>
<li>用含义丰富的词来使注释简洁。</li>
</ul>
<h2 id="把控制流变得易读"><a href="#把控制流变得易读" class="headerlink" title="把控制流变得易读"></a>把控制流变得易读</h2><p>关键思想</p>
<p>把条件、循环以及其他对控制流的改变做得越“自然”越好。运用一种方式使读者不用停下来重读你的代码。</p>
<h3 id="条件语句中参数的顺序"><a href="#条件语句中参数的顺序" class="headerlink" title="条件语句中参数的顺序"></a>条件语句中参数的顺序</h3><ul>
<li>比较的左侧 “被问询的”表达式，它的值更倾向于不断变化</li>
<li>比较的右侧 用来做比较的表达式，它的值更倾向于常量</li>
</ul>
<p>?:条件表达式（又名“三目运算符”）</p>
<p>在类C的语言中，可以把一个条件表达式写成cond ? a : b这样的形式，其实就是一种对if (cond) { a } else {b }的紧凑写法。它对于可读性的影响是富有争议的。拥护者认为这种方式可以只写一行而不用写成多行。反对者则说这可能会造成阅读的混乱而且很难用调试器来调试。</p>
<p>关键思想</p>
<p>相对于追求最小化代码行数，一个更好的度量方法是最小化人们理解它所需的时间。</p>
<ul>
<li>默认情况下都用if/else。三目运算符?:只有在最简单的情况下使用。</li>
<li>避免do/while循环<ul>
<li>我的经验是，do语句是错误和困惑的来源……我倾向于把条件放在“前面我能看到的地方”。其结果是，我倾向于避免使用do语句。</li>
</ul>
</li>
<li>最小化嵌套<ul>
<li>嵌套很深的代码很难以理解。每个嵌套层次都在读者的“思维栈”上又增加了一个条件。当读者见到一个右大括号（}）时，可能很难“出栈”来回忆起它背后的条件是什么。</li>
</ul>
</li>
</ul>
<p>关键思想</p>
<ul>
<li>当你对代码做改动时，从全新的角度审视它，把它作为一个整体来看待。</li>
<li>通过提早返回来减少嵌套</li>
</ul>
<h2 id="拆分超长的表达式"><a href="#拆分超长的表达式" class="headerlink" title="拆分超长的表达式"></a>拆分超长的表达式</h2><p>巨型乌贼是一种神奇而又聪明的动物，但它近乎完美的身体设计有一个致命的弱点：在它的食管附近围绕着圆环形的大脑。所以如果它一次吞太多的食物，它的大脑会受到伤害。</p>
<p>关键思想</p>
<p>把你的超长表达式拆分成更容易理解的小块。</p>
<ul>
<li>用做解释的变量<ul>
<li>拆分表达式最简单的方法就是引入一个额外的变量，让它来表示一个小一点的子表达式。这个额外的变量有时叫做“解释变量”，因为它可以帮助解释子表达式的含义。</li>
</ul>
</li>
<li>总结变量<ul>
<li>即使一个表达式不需要解释（因为你可以看出它的含义），把它装入一个新变量中仍然有用。我们把它叫做总结变量，它的目的只是用一个短很多的名字来代替一大块代码，这个名字会更容易管理和思考。</li>
</ul>
</li>
</ul>
<h3 id="滥用短路逻辑"><a href="#滥用短路逻辑" class="headerlink" title="滥用短路逻辑"></a>滥用短路逻辑</h3><p>关键思想</p>
<p>要小心“智能”的小代码段——它们往往在以后会让别人读起来感到困惑。</p>
<h3 id="总结-4"><a href="#总结-4" class="headerlink" title="总结"></a>总结</h3><p>很难思考巨大的表达式。本章给出了几种拆分表达式的方法，以便读者可以一段一段地消化。</p>
<p>一个简单的技术是引入“解释变量”来代表较长的子表达式。这种方式有三个好处：</p>
<ul>
<li>它把巨大的表达式拆成小段。</li>
<li>它通过用简单的名字描述子表达式来让代码文档化。</li>
<li>它帮助读者识别代码中的主要概念。</li>
<li>另一个技术是用德摩根定理来操作逻辑表达式——这个技术有时可以把布尔表达式用更整洁的方式重写（例如if (!(a &amp;&amp; !b))变成if (!a || b)）。</li>
</ul>
<h2 id="变量与可读性"><a href="#变量与可读性" class="headerlink" title="变量与可读性"></a>变量与可读性</h2><p>在本章里，你会看到对于变量的草率运用如何让程序更难理解。确切地说，我们会讨论三个问题：</p>
<ol>
<li>变量越多，就越难全部跟踪它们的动向。</li>
<li>变量的作用域越大，就需要跟踪它的动向越久。</li>
<li>变量改变得越频繁，就越难以跟踪它的当前值。</li>
</ol>
<h3 id="缩小变量的作用域"><a href="#缩小变量的作用域" class="headerlink" title="缩小变量的作用域"></a>缩小变量的作用域</h3><p>关键思想</p>
<p>让你的变量对尽量少的代码行可见。</p>
<h3 id="只写一次的变量更好"><a href="#只写一次的变量更好" class="headerlink" title="只写一次的变量更好"></a>只写一次的变量更好</h3><p>关键思想</p>
<p>操作一个变量的地方越多，越难确定它的当前值。</p>
<h3 id="总结-5"><a href="#总结-5" class="headerlink" title="总结"></a>总结</h3><p>本章是关于程序中的变量是如何快速累积而变得难以跟踪的。你可以通过减少变量的数量和让它们尽量“轻量级”来让代码更有可读性。具体有：</p>
<ul>
<li>减少变量，即那些妨碍的变量。我们给出了几个例子来演示如何通过立刻处理结果来消除“中间结果”变量。</li>
<li>减小每个变量的作用域，越小越好。把变量移到一个有最少代码可以看到它的地方。眼不见，心不烦。</li>
<li>只写一次的变量更好。那些只设置一次值的变量（或者const、final、常量）使得代码更容易理解。</li>
</ul>
<h2 id="重新组织代码"><a href="#重新组织代码" class="headerlink" title="重新组织代码"></a>重新组织代码</h2><p>该部分会讨论可以在函数级别对代码做的更大的改动。具体来讲，我们会讲到三种组织代码的方法：</p>
<ul>
<li>抽取出那些与程序主要目的“不相关的子问题”。</li>
<li>重新组织代码使它一次只做一件事情。</li>
<li>先用自然语言描述代码，然后用这个描述来帮助你找到更整洁的解决方案。</li>
</ul>
<h2 id="抽取不相关的子问题"><a href="#抽取不相关的子问题" class="headerlink" title="抽取不相关的子问题"></a>抽取不相关的子问题</h2><p>本章的建议是“积极地发现并抽取出不相关的子逻辑”。我们是指：</p>
<ol>
<li>看看某个函数或代码块，问问你自己：这段代码高层次的目标是什么？</li>
<li>对于每一行代码，问一下：它是直接为了目标而工作吗？这段代码高层次的目标是什么呢？</li>
<li>如果足够的行数在解决不相关的子问题，抽取代码到独立的函数中。</li>
</ol>
<h3 id="创建大量通用代码"><a href="#创建大量通用代码" class="headerlink" title="创建大量通用代码"></a>创建大量通用代码</h3><p>通用代码很好，因为“它完全地从项目的其他部分中解耦出来”。像这样的代码容易开发，容易测试，并且容易理解。想象一下如果你所有的代码都如此会怎样！</p>
<h3 id="简化已有接口"><a href="#简化已有接口" class="headerlink" title="简化已有接口"></a>简化已有接口</h3><p>人人都爱提供整洁接口的库——那种参数少，不需要很多设置并且通常只需要花一点工夫就可以使用的库。它让你的代码看起来优雅：简单而又强大。但如果你所用的接口并不整洁，你还是可以创建自己整洁的“包装”函数。</p>
<h3 id="总结-6"><a href="#总结-6" class="headerlink" title="总结"></a>总结</h3><p>对本章一个简单的总结就是“把一般代码和项目专有的代码分开”。其结果是，大部分代码都是一般代码。通过建立一大组库和辅助函数来解决一般问题，剩下的只是让你的程序与众不同的核心部分。</p>
<p>这个技巧有帮助的原因是它使程序员关注小而定义良好的问题，这些问题已经同项目的其他部分脱离。其结果是，对于这些子问题的解决方案倾向于更加完整和正确。你也可以在以后重用它们。</p>
<h3 id="一次只做一件事"><a href="#一次只做一件事" class="headerlink" title="一次只做一件事"></a>一次只做一件事</h3><p>关键思想</p>
<p>应该把代码组织得一次只做一件事情。</p>
<h2 id="把想法变成代码"><a href="#把想法变成代码" class="headerlink" title="把想法变成代码"></a>把想法变成代码</h2><p>在本章中，我们会用一个简单的过程来使你编写更清晰的代码：</p>
<ol>
<li>像对着一个同事一样用自然语言描述代码要做什么。</li>
<li>注意描述中所用的关键词和短语。</li>
<li>写出与描述所匹配的代码。</li>
</ol>
<h2 id="少写代码"><a href="#少写代码" class="headerlink" title="少写代码"></a>少写代码</h2><p>关键思想</p>
<p>最好读的代码就是没有代码。</p>
<h3 id="别费神实现那个功能——你不会需要它"><a href="#别费神实现那个功能——你不会需要它" class="headerlink" title="别费神实现那个功能——你不会需要它"></a>别费神实现那个功能——你不会需要它</h3><p>程序员还倾向于低估实现一个功能所要花的工夫。我们乐观地估计了实现一个粗糙原型所要花的时间，但是忘记了在将来代码库的维护、文件以及后增的“重量”所带来的额外时间。</p>
<h3 id="保持小代码库"><a href="#保持小代码库" class="headerlink" title="保持小代码库"></a>保持小代码库</h3><p>最好的解决办法就是“让你的代码库越小，越轻量级越好”，就算你的项目在增长。那么你就要：</p>
<ul>
<li>创建越多越好的“工具”代码来减少重复代码（见第10章）。</li>
<li>减少无用代码或没有用的功能（见下图）。</li>
<li>让你的项目保持分开的子项目状态。</li>
<li>总的来说，要小心代码的“重量”。让它保持又轻又灵。</li>
</ul>
<h3 id="熟悉你周边的库"><a href="#熟悉你周边的库" class="headerlink" title="熟悉你周边的库"></a>熟悉你周边的库</h3><p>很多时候，程序员就是不知道现有的库可以解决他们的问题。或者有时，它们忘了库可以做什么。知道你的库能做什么以便你可以使用它，这一点很重要。</p>
<p>这里有一条比较中肯的建议：每隔一段时间，花15分钟来阅读标准库中的所有函数/模块/类型的名字。这包括C++标准模板库（STL）、Java API、Python内置的模块以及其他内容。</p>
<h3 id="总结-7"><a href="#总结-7" class="headerlink" title="总结"></a>总结</h3><p>冒险、兴奋——绝地武士追求的并不是这些。——尤达大师</p>
<p>你可以通过以下方法避免编写新代码：</p>
<ul>
<li>从项目中消除不必要的功能，不要过度设计。</li>
<li>重新考虑需求，解决版本最简单的问题，只要能完成工作就行。</li>
<li>经常性地通读标准库的整个API，保持对它们的熟悉程度。</li>
</ul>
<h3 id="使测试易于阅读和维护"><a href="#使测试易于阅读和维护" class="headerlink" title="使测试易于阅读和维护"></a>使测试易于阅读和维护</h3><p>关键思想</p>
<p>测试应当具有可读性，以便其他程序员可以舒服地改变或者增加测试。</p>
<p>当测试代码多得让人望而止步，会发生下面的事情：</p>
<ul>
<li>程序员会不敢修改真实代码。“啊，我们不想纠结于那段代码，更新它的那些测试将会是个噩梦！”</li>
<li>当增加新代码时，程序员不会再增加新的测试。一段时间后，测试的模块越来越少，你不再对它有信心。</li>
<li>相反，你希望鼓励你代码的使用者（尤其是你自己！）习惯于测试代码。他们应该能在新改动破坏已有测试时做出分析，并且应该感觉增加新测试很容易。</li>
</ul>
<h3 id="选择好的测试输入"><a href="#选择好的测试输入" class="headerlink" title="选择好的测试输入"></a>选择好的测试输入</h3><p>关键思想</p>
<p>基本原则是，你应当选择一组最简单的输入，它能完整地使用被测代码。</p>
<p>关键思想</p>
<p>又简单又能完成工作的测试值更好。</p>
<h3 id="总结-8"><a href="#总结-8" class="headerlink" title="总结"></a>总结</h3><p>以下是如何改进测试的几个具体要点：</p>
<ul>
<li>每个测试的最高一层应该越简明越好。最好每个测试的输入/输出可以用一行代码来描述。</li>
<li>如果测试失败了，它所发出的错误消息应该能让你容易跟踪并修正这个bug。</li>
<li>使用最简单的并且能够完整运用代码的测试输入。</li>
<li>给测试函数取一个有完整描述性的名字，以使每个测试所测到的东西很明确。不要用Test1()，而用像<code>Test_&lt;FunctionName&gt;_&lt;Situation&gt;</code>这样的名字。</li>
<li>最重要的是，要使它易于改动和增加新的测试。</li>
</ul>
<h2 id="深入阅读"><a href="#深入阅读" class="headerlink" title="深入阅读"></a>深入阅读</h2><p>关于写高质量代码的书</p>
<ul>
<li>《Code Complete: A Practical Handbook of Software Constructionm, 2nd edition》,by Steve McConnell（Microsoft Press, 2004）<ul>
<li>一本严谨的大部头，是关于软件建构的所有方面的，包括代码质量以及其他。</li>
</ul>
</li>
<li>《Refactoring: Improving the Design of Existing Code》, by Martin Fowler et al.（Addison-Wesley Professional, 1999）<ul>
<li>一本关于增量代码改进哲学的好书，包含很多不同重构方法的具体分类，以及要在尽管不破坏东西的情况下做出这些改动所需的步骤。</li>
</ul>
</li>
<li>《The Practice of Programming》, by Brian Kernighan and Rob Pike（Addison-Wesley Professional, 1999）<ul>
<li>讨论了编程的多个方面，包含调试、测试、可移植性和性能，有很多代码示例。</li>
</ul>
</li>
<li>《The Pragmatic Programmer: From Journeyman to Master》, by Andrew Hunt and David Thomas（Addison-Wesley Professional, 1999）<ul>
<li>一系列好的编程和工程原则，按短小的讨论来组织。</li>
</ul>
</li>
<li>《Clean Code: A Handbook of Agile Software Craftsmanship》, by Robert C.<br>Martin（Prentice Hall, 2008）<ul>
<li>和本书类似（但是专门为Java），还拓展了其他如错误处理和并发等话题。</li>
</ul>
</li>
</ul>
<p>关于各种编程话题的书</p>
<ul>
<li>《JavaScript: The Good Parts》, by Douglas Crockford（O’Reilly, 2008）<ul>
<li>我们认为这本书的精神与我们的书相似，尽管该书不是直接关于可读性的。它是关于如何使用JavaScript语言中不容易出错而且更容易理解的一个清晰子集的。</li>
</ul>
</li>
<li>《Effective Java, 2nd edition》, by Joshua Bloch（Prentice Hall, 2008）<ul>
<li>一本杰出的书，是关于让你的Java程序更易读和更少bug的。尽管它是关于Java的，但其中很多原则对所有的语言都适用。强烈推荐。</li>
</ul>
</li>
<li>《Design Patterns: Elements of Reusable Object-Oriented Software》, by Erich Gamma, Richard Helm, Ralph Johnson, and John Vlissides（Addison-Wesley Professional, 1994）<ul>
<li>这本书是软件工程师用来讨论面向对向编程所用的“模式”这种通用语言的原始出处。作为通用的、有用的模式的一览，它帮助程序员在第一次自己解决棘手问题时避免经常出现的陷阱。</li>
</ul>
</li>
<li>《Programming Pearls, 2nd edition》, by Jon Bentley（Addison-Wesley Professional,1999）<ul>
<li>关于真实软件问题的一系列文章。每一章都有解决真实世界中问题的真知灼见。</li>
</ul>
</li>
<li>《High Performance Web Sites》, by Steve Souders（O’Reilly, 2007）<ul>
<li>尽管这不是一本关于编程的书，但这本书也值得注意，因为它描述了几种不需要写很多代码就可优化网站的方法（与本书第13章的目的一致）。</li>
</ul>
</li>
<li>《Joel on Software: And on Diverse and…》, by Joel Spolsky<ul>
<li>来自于<a href="http://www.joelonsoftware.com/的一些优秀文章。Spolsky的作品涉及软件工程的很多方面，并且对很多相关话题都深有见解。" target="_blank" rel="external">http://www.joelonsoftware.com/的一些优秀文章。Spolsky的作品涉及软件工程的很多方面，并且对很多相关话题都深有见解。</a></li>
<li>一定要读一读“Things You Should Never Do, Part I”和“The Joel Test: 12 Steps to BetterCode”。</li>
</ul>
</li>
</ul>
<p>我们发自肺腑地赞同Knuth的说法：“与其把我们主要的任务想象成指示计算机做什么，不如让我们关注解释给人类我们希望让计算机做什么”</p>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>您的支持是对我创作最大的鼓励！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/misc/wechat.jpg" alt="wdxtub WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/misc/alipay.jpg" alt="wdxtub Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/代码/" rel="tag">#代码</a>
          
            <a href="/tags/风格/" rel="tag">#风格</a>
          
            <a href="/tags/可读/" rel="tag">#可读</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2014/09/11/wang-xiao-bo-series-clip/" rel="next" title="【王小波全集】读书笔记">
                <i class="fa fa-chevron-left"></i> 【王小波全集】读书笔记
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2014/09/11/wang-yang-ming-clip/" rel="prev" title="【唯心有物王阳明正传】读书笔记">
                【唯心有物王阳明正传】读书笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          

  <p>热评文章</p>
  <div class="ds-top-threads" data-range="weekly" data-num-items="4"></div>


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2014/09/11/readable-code-clip/"
           data-title="【编写可读代码的艺术】读书笔记" data-url="http://wdxtub.com/2014/09/11/readable-code-clip/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/misc/avatar.jpg"
               alt="wdxtub" />
          <p class="site-author-name" itemprop="name">wdxtub</p>
          <p class="site-description motion-element" itemprop="description">人文/科学/读书/写作/思考/编程/架构/数据/广交朋友/@SYSU/@CMU</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">710</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">874</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/wdxtub" target="_blank" title="GitHub">
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/wdxtub" target="_blank" title="微博">
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://douban.com/people/wdx" target="_blank" title="豆瓣">
                  
                  豆瓣
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/wdxtub" target="_blank" title="知乎">
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              不妨看看
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://zhchbin.github.io/" title="zhchbin" target="_blank">zhchbin</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.algorithmdog.com/" title="算法狗" target="_blank">算法狗</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.52cs.org/" title="我爱计算机" target="_blank">我爱计算机</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://jackqdyulei.github.io/" title="雷雷" target="_blank">雷雷</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://guojiex.github.io/" title="瓜瓜" target="_blank">瓜瓜</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://wdxtub.lofter.com/" title="我的 Lofter" target="_blank">我的 Lofter</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://wdxtub.com/interview/" title="刷题笔记" target="_blank">刷题笔记</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#代码应当易于理解"><span class="nav-number">1.</span> <span class="nav-text">代码应当易于理解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表面层次的改进"><span class="nav-number">2.</span> <span class="nav-text">表面层次的改进</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#把信息装到名字里"><span class="nav-number">3.</span> <span class="nav-text">把信息装到名字里</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#选择专业的词"><span class="nav-number">3.1.</span> <span class="nav-text">选择专业的词</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结"><span class="nav-number">3.2.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#不会误解的名字"><span class="nav-number">4.</span> <span class="nav-text">不会误解的名字</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#总结-1"><span class="nav-number">4.1.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#审美"><span class="nav-number">5.</span> <span class="nav-text">审美</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#个人风格与一致性"><span class="nav-number">5.1.</span> <span class="nav-text">个人风格与一致性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结-2"><span class="nav-number">5.2.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#该写什么样的注释"><span class="nav-number">6.</span> <span class="nav-text">该写什么样的注释</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#什么不需要注释"><span class="nav-number">6.1.</span> <span class="nav-text">什么不需要注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#记录你的思想"><span class="nav-number">6.2.</span> <span class="nav-text">记录你的思想</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#站在读者的角度"><span class="nav-number">6.3.</span> <span class="nav-text">站在读者的角度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#最后的思考——克服“作者心理阻滞”"><span class="nav-number">6.4.</span> <span class="nav-text">最后的思考——克服“作者心理阻滞”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#写出言简意赅的注释"><span class="nav-number">6.5.</span> <span class="nav-text">写出言简意赅的注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结-3"><span class="nav-number">6.6.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#把控制流变得易读"><span class="nav-number">7.</span> <span class="nav-text">把控制流变得易读</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#条件语句中参数的顺序"><span class="nav-number">7.1.</span> <span class="nav-text">条件语句中参数的顺序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#拆分超长的表达式"><span class="nav-number">8.</span> <span class="nav-text">拆分超长的表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#滥用短路逻辑"><span class="nav-number">8.1.</span> <span class="nav-text">滥用短路逻辑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结-4"><span class="nav-number">8.2.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量与可读性"><span class="nav-number">9.</span> <span class="nav-text">变量与可读性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#缩小变量的作用域"><span class="nav-number">9.1.</span> <span class="nav-text">缩小变量的作用域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#只写一次的变量更好"><span class="nav-number">9.2.</span> <span class="nav-text">只写一次的变量更好</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结-5"><span class="nav-number">9.3.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重新组织代码"><span class="nav-number">10.</span> <span class="nav-text">重新组织代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#抽取不相关的子问题"><span class="nav-number">11.</span> <span class="nav-text">抽取不相关的子问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建大量通用代码"><span class="nav-number">11.1.</span> <span class="nav-text">创建大量通用代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#简化已有接口"><span class="nav-number">11.2.</span> <span class="nav-text">简化已有接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结-6"><span class="nav-number">11.3.</span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一次只做一件事"><span class="nav-number">11.4.</span> <span class="nav-text">一次只做一件事</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#把想法变成代码"><span class="nav-number">12.</span> <span class="nav-text">把想法变成代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#少写代码"><span class="nav-number">13.</span> <span class="nav-text">少写代码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#别费神实现那个功能——你不会需要它"><span class="nav-number">13.1.</span> <span class="nav-text">别费神实现那个功能——你不会需要它</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#保持小代码库"><span class="nav-number">13.2.</span> <span class="nav-text">保持小代码库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#熟悉你周边的库"><span class="nav-number">13.3.</span> <span class="nav-text">熟悉你周边的库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结-7"><span class="nav-number">13.4.</span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使测试易于阅读和维护"><span class="nav-number">13.5.</span> <span class="nav-text">使测试易于阅读和维护</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#选择好的测试输入"><span class="nav-number">13.6.</span> <span class="nav-text">选择好的测试输入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结-8"><span class="nav-number">13.7.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#深入阅读"><span class="nav-number">14.</span> <span class="nav-text">深入阅读</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wdxtub</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"wdxblog"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementById('footer')
      || document.getElementById('footer')).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
      <script src="/js/src/hook-duoshuo.js"></script>
    
  





  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src=""></script>


  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


</body>
</html>

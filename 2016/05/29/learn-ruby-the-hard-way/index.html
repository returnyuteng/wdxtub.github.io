<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.lug.ustc.edu.cn/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="学习,代码,Ruby," />





  <link rel="alternate" href="/atom.xml" title="小土刀" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="在学习新语言这个事情上，笨办法往往是最高效的办法。">
<meta property="og:type" content="article">
<meta property="og:title" content="【Ruby 之旅】II 我的笨办法学 Ruby">
<meta property="og:url" content="http://wdxtub.com/2016/05/29/learn-ruby-the-hard-way/index.html">
<meta property="og:site_name" content="小土刀">
<meta property="og:description" content="在学习新语言这个事情上，笨办法往往是最高效的办法。">
<meta property="og:updated_time" content="2016-11-04T14:12:04.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【Ruby 之旅】II 我的笨办法学 Ruby">
<meta name="twitter:description" content="在学习新语言这个事情上，笨办法往往是最高效的办法。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 4016951,
      author: '博主'
    }
  };
</script>

  <title> 【Ruby 之旅】II 我的笨办法学 Ruby | 小土刀 </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <!-- hexo-inject:begin --><!-- hexo-inject:end --><script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=59042340";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <div style="display: none;">
    <script src="http://s6.cnzz.com/stat.php?id=1260625611&web_id=1260625611" type="text/javascript"></script>
  </div>





  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">小土刀</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Agony is my triumph</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-work">
          <a href="/2016/09/11/work-page" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-pencil"></i> <br />
            
            作品
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tech">
          <a href="/2009/09/11/tech-page" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-battery-full"></i> <br />
            
            技术
          </a>
        </li>
      
        
        <li class="menu-item menu-item-life">
          <a href="/1990/09/11/life-page" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-bolt"></i> <br />
            
            生活
          </a>
        </li>
      
        
        <li class="menu-item menu-item-booklist">
          <a href="/1997/09/11/booklist-page" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-diamond"></i> <br />
            
            书单
          </a>
        </li>
      
        
        <li class="menu-item menu-item-thanks">
          <a href="/thanks" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-gift"></i> <br />
            
            关于我
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                【Ruby 之旅】II 我的笨办法学 Ruby
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-29T15:18:12+08:00" content="2016-05-29">
              2016-05-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Technique/" itemprop="url" rel="index">
                    <span itemprop="name">Technique</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/29/learn-ruby-the-hard-way/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/29/learn-ruby-the-hard-way/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
              &nbsp; | &nbsp;
              <span class="page-pv"><i class="fa fa-file-o"></i>
              <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>在学习新语言这个事情上，笨办法往往是最高效的办法。</p>
<a id="more"></a>
<hr>
<h2 id="系列文章"><a href="#系列文章" class="headerlink" title="系列文章"></a>系列文章</h2><p>Ruby 是 DJI 许多项目主要用的编程语言之一，虽然个人不是特别喜欢这因为太多语法糖而腻歪的语言，但是至少要能读懂项目代码。这里是我学习 Ruby 的系列文章。</p>
<p>本系列已完结，具体的资源在文章中都有列出，可能会不定期更新常用库。</p>
<ul>
<li><a href="http://wdxtub.com/2016/03/30/ruby-first-step/">I Ruby 快速入门</a></li>
<li><a href="http://wdxtub.com/2016/05/29/learn-ruby-the-hard-way/">II 我的笨办法学 Ruby</a></li>
<li><a href="http://wdxtub.com/2016/06/16/my-ruby-style/">III 我的 Ruby 风格指南</a></li>
<li><a href="http://wdxtub.com/2016/06/16/my-rails-style/">IV 我的 Rails 风格指南</a></li>
<li><a href="http://wdxtub.com/2016/06/17/rails-quick-guide/">V Rails 快速入门</a></li>
<li><a href="http://wdxtub.com/2016/07/06/ror-deploy-guide/">Ruby On Rails 部署指南</a></li>
</ul>
<h2 id="开始之前"><a href="#开始之前" class="headerlink" title="开始之前"></a>开始之前</h2><p>很早之前学习 Python 的时候就跟过『笨办法学 Python』这本教材，那么这次要学的就是 Ruby 了，在上一篇日志中我们大概对 Ruby 有了基本的认识，不过还不够系统，也远达不到掌握。所以就通过简单的例子和大量的编码练习来快速入门吧！</p>
<p>关键点有三个：实践、能力培养和习惯养成。这些可能要比语言的语法本身更加重要！网上目前的简体中文版本基本已经失效，所以这里我基于 Ruby 2.1 和繁体中文版本，自己把整个教程『重写』一次（其实就是术语转换和对应 ruby 版本的细微变化）</p>
<p>感谢前人的辛勤劳动，如果看完觉得好，可以去官方网站买一本英文版，也算是支持作者（当然也可以顺手支持我一下，文末有二维码）</p>
<h2 id="习题-0-准备工作"><a href="#习题-0-准备工作" class="headerlink" title="习题 0 准备工作"></a>习题 0 准备工作</h2><p>简单来说就是安装 Ruby，具体的安装过程这里就不赘述了，这里只记下一些比较常用的小技巧：</p>
<ul>
<li>使用 <code>ruby -v</code> 查看本机的 Ruby 版本，我的是 <code>ruby 2.1.4p265 (2014-10-27 revision 48166) [x86_64-darwin14.0]</code></li>
<li>输入 <code>irb</code> 进入 ruby 环境，<code>ctrl+z</code> 可以退出</li>
</ul>
<h2 id="习题-1-第一个程序"><a href="#习题-1-第一个程序" class="headerlink" title="习题 1 第一个程序"></a>习题 1 第一个程序</h2><p>新建一个名为 <code>ex1.rb</code> 的文件，内容为：</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">puts <span class="string">"Hello World!"</span></div><div class="line">puts <span class="string">"大家好"</span></div><div class="line">puts <span class="string">"My name is Da Wang."</span></div><div class="line">puts <span class="string">"Visit wdxtub.com for more!"</span></div><div class="line">puts <span class="string">'Just visit it!'</span></div><div class="line">puts <span class="string">"Don't hesitate."</span></div><div class="line">puts <span class="string">'I "said" just do it.'</span></div></pre></td></tr></table></figure>
<p>然后使用 <code>ruby ex1.rb</code> 即可执行，结果为：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex1.rb</div><div class="line">Hello World!</div><div class="line">大家好</div><div class="line">My name is Da Wang.</div><div class="line">Visit wdxtub.com <span class="keyword">for</span> more!</div><div class="line">Just visit it!</div><div class="line">Don<span class="string">'t hesitate.</span></div><div class="line">I "said" just do it.</div></pre></td></tr></table></figure>
<p>这就是这一节的内容了！如果想要注释掉某一行，在开头添加 <code>#</code> 符号即可，简单吧！</p>
<h2 id="习题-2-注释和井号"><a href="#习题-2-注释和井号" class="headerlink" title="习题 2 注释和井号"></a>习题 2 注释和井号</h2><p>注释在上一讲也有提到，这里我们新建一个 <code>ex2.rb</code>，来试试看具体注释的用法：</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="comment"># 这里是注释</span></div><div class="line"><span class="comment"># This is a comment</span></div><div class="line">puts <span class="string">'HaHaHa!'</span></div><div class="line"></div><div class="line"><span class="comment"># 这里还是注释</span></div><div class="line"><span class="comment"># This is another comment</span></div><div class="line">puts <span class="string">'HoHoHo!'</span></div></pre></td></tr></table></figure>
<p>运行一下，结果是：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex2.rb</div><div class="line">HaHaHa!</div><div class="line">HoHoHo!</div></pre></td></tr></table></figure>
<h2 id="习题-3-数字和数学运算"><a href="#习题-3-数字和数学运算" class="headerlink" title="习题 3 数字和数学运算"></a>习题 3 数字和数学运算</h2><p>这一次我们来练习基本的数学运算，注意整型和浮点数的区别，文件名为 <code>ex3.rb</code>：</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">puts <span class="string">"I will now count my chickens:"</span></div><div class="line"></div><div class="line">puts <span class="string">"Hens"</span>, <span class="number">25</span> + <span class="number">30</span> / <span class="number">6</span></div><div class="line">puts <span class="string">"Roosters"</span>, <span class="number">100</span> - <span class="number">25</span> * <span class="number">3</span> % <span class="number">4</span></div><div class="line"></div><div class="line">puts <span class="string">"Now I will count the eggs:"</span></div><div class="line"></div><div class="line"><span class="comment"># 如果想用浮点数，需要使用 1.0，而不能用 1</span></div><div class="line">puts <span class="number">3</span> + <span class="number">2</span> + <span class="number">1</span> - <span class="number">5</span> + <span class="number">4</span> % <span class="number">2</span> - <span class="number">1.0</span> / <span class="number">4</span> + <span class="number">6</span></div><div class="line"></div><div class="line">puts <span class="string">"Is it true that 3 + 2 &lt; 5 - 7?"</span></div><div class="line"></div><div class="line">puts <span class="number">3</span> + <span class="number">2</span> &lt; <span class="number">5</span> - <span class="number">7</span></div><div class="line"></div><div class="line">puts <span class="string">"What is 3 + 2?"</span>, <span class="number">3</span> + <span class="number">2</span></div><div class="line">puts <span class="string">"What is 5 - 7?"</span>, <span class="number">5</span> - <span class="number">7</span></div><div class="line"></div><div class="line">puts <span class="string">"Oh, that's why it's false."</span></div><div class="line"></div><div class="line">puts <span class="string">"How about some more."</span></div><div class="line"></div><div class="line">puts <span class="string">"Is it greater?"</span>, <span class="number">5</span> &gt; -<span class="number">2</span></div><div class="line">puts <span class="string">"Is it greater or equal?"</span>, <span class="number">5</span> &gt;= -<span class="number">2</span></div><div class="line">puts <span class="string">"Is it less or equal?"</span>, <span class="number">5</span> &lt;= -<span class="number">2</span></div></pre></td></tr></table></figure>
<p>结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex3.rb</div><div class="line">I will now count my chickens:</div><div class="line">Hens</div><div class="line">30</div><div class="line">Roosters</div><div class="line">97</div><div class="line">Now I will count the eggs:</div><div class="line">6.75</div><div class="line">Is it <span class="literal">true</span> that 3 + 2 &lt; 5 - 7?</div><div class="line"><span class="literal">false</span></div><div class="line">What is 3 + 2?</div><div class="line">5</div><div class="line">What is 5 - 7?</div><div class="line">-2</div><div class="line">Oh, that<span class="string">'s why it'</span>s false.</div><div class="line">How about some more.</div><div class="line">Is it greater?</div><div class="line"><span class="literal">true</span></div><div class="line">Is it greater or equal?</div><div class="line"><span class="literal">true</span></div><div class="line">Is it less or equal?</div><div class="line"><span class="literal">false</span></div></pre></td></tr></table></figure>
<h2 id="习题-4-变量和命名"><a href="#习题-4-变量和命名" class="headerlink" title="习题 4 变量和命名"></a>习题 4 变量和命名</h2><p>用具体的例子介绍变量的定义，还是比较基础的，文件为 <code>ex4.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">cars = <span class="number">100</span></div><div class="line">space_in_a_car = <span class="number">4.0</span></div><div class="line">drivers = <span class="number">30</span></div><div class="line">passengers = <span class="number">90</span></div><div class="line">cars_not_driven = cars - drivers</div><div class="line">cars_driven = drivers</div><div class="line">carpool_capacity = cars_driven * space_in_a_car</div><div class="line">average_passengers_per_car = passengers / cars_driven</div><div class="line"></div><div class="line">puts <span class="string">"There are <span class="subst">#&#123;cars&#125;</span> cars available."</span></div><div class="line">puts <span class="string">"There are only <span class="subst">#&#123;drivers&#125;</span> drivers available."</span></div><div class="line">puts <span class="string">"There will be <span class="subst">#&#123;cars_not_driven&#125;</span> empty cars today."</span></div><div class="line">puts <span class="string">"We can transport <span class="subst">#&#123;carpool_capacity&#125;</span> people today."</span></div><div class="line">puts <span class="string">"We have <span class="subst">#&#123;passengers&#125;</span> passengers to carpool today."</span></div><div class="line">puts <span class="string">"We need to put about <span class="subst">#&#123;average_passengers_per_car&#125;</span> in each car."</span></div></pre></td></tr></table></figure>
<p>注意这里使用 <code>#{变量名}</code> 来进行值替换，结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex4.rb</div><div class="line">There are 100 cars available.</div><div class="line">There are only 30 drivers available.</div><div class="line">There will be 70 empty cars today.</div><div class="line">We can transport 120.0 people today.</div><div class="line">We have 90 passengers to carpool today.</div><div class="line">We need to put about 3 <span class="keyword">in</span> each car.</div></pre></td></tr></table></figure>
<h2 id="习题-5-变量与格式化输出"><a href="#习题-5-变量与格式化输出" class="headerlink" title="习题 5 变量与格式化输出"></a>习题 5 变量与格式化输出</h2><p>注意不同类型用的不同占位符号，对应文件为 <code>ex5.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">my_name = <span class="string">'Da Wang'</span></div><div class="line">my_age = <span class="number">25</span> <span class="comment"># not a lie</span></div><div class="line">my_height = <span class="number">74</span> <span class="comment"># inches</span></div><div class="line">my_weight = <span class="number">180</span> <span class="comment"># lbs</span></div><div class="line">my_eyes = <span class="string">'Black'</span></div><div class="line">my_teeth = <span class="string">'White'</span></div><div class="line">my_hair = <span class="string">'Black'</span></div><div class="line"></div><div class="line">puts <span class="string">"Let's talk about %s."</span> % my_name</div><div class="line">puts <span class="string">"He's %d inches tall."</span> % my_height</div><div class="line">puts <span class="string">"He's %d pounds heavy."</span> % my_weight</div><div class="line">puts <span class="string">"Actually that's not too heavy."</span></div><div class="line">puts <span class="string">"He's got %s eyes and %s hair."</span> % [my_eyes, my_hair]</div><div class="line">puts <span class="string">"His teeth are usually %s depending on the coffee."</span> % my_teeth</div><div class="line"></div><div class="line"><span class="comment"># this line is tricky, try to get it exactly right</span></div><div class="line">puts <span class="string">"If I add %d, %d, and %d I get %d."</span> % [</div><div class="line">    my_age, my_height, my_weight, my_age + my_height + my_weight]</div></pre></td></tr></table></figure>
<p>注意如果有多个变量，需要用方括号包含起来，结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">Let<span class="string">'s talk about Da Wang.</span></div><div class="line">He's 74 inches tall.</div><div class="line">He<span class="string">'s 180 pounds heavy.</span></div><div class="line">Actually that's not too heavy.</div><div class="line">He<span class="string">'s got Black eyes and Black hair.</span></div><div class="line">His teeth are usually White depending on the coffee.</div><div class="line">If I add 25, 74, and 180 I get 279.</div></pre></td></tr></table></figure>
<h2 id="习题-6-字符串和文字"><a href="#习题-6-字符串和文字" class="headerlink" title="习题 6 字符串和文字"></a>习题 6 字符串和文字</h2><p>字符串有很多很直观的操作，比方说可以用 <code>+</code> 来拼接字符串，或者用 <code>#{变量名}</code> 和 <code>%s</code> 格式化输出，我们在这里都尝试一下，文件为 <code>ex6.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">x = <span class="string">"There are <span class="subst">#&#123;<span class="number">10</span>&#125;</span> types of people."</span></div><div class="line">binary = <span class="string">"binary"</span></div><div class="line">do_not = <span class="string">"don't"</span></div><div class="line">y = <span class="string">"Those who know <span class="subst">#&#123;binary&#125;</span> and those who <span class="subst">#&#123;do_not&#125;</span>."</span></div><div class="line"></div><div class="line">puts x</div><div class="line">puts y</div><div class="line"></div><div class="line">puts <span class="string">"I said: <span class="subst">#&#123;x&#125;</span>."</span></div><div class="line">puts <span class="string">"I also said: '<span class="subst">#&#123;y&#125;</span>'."</span></div><div class="line"></div><div class="line">hilarious = <span class="literal">false</span></div><div class="line">joke_evaluation = <span class="string">"Isn't that joke so funny?! <span class="subst">#&#123;hilarious&#125;</span>"</span></div><div class="line"></div><div class="line">puts joke_evaluation</div><div class="line"></div><div class="line">w = <span class="string">"This is the left side of..."</span></div><div class="line">e = <span class="string">"a string with a right side."</span></div><div class="line"></div><div class="line">puts w + e</div></pre></td></tr></table></figure>
<p>结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex6.rb</div><div class="line">There are 10 types of people.</div><div class="line">Those who know binary and those who don<span class="string">'t.</span></div><div class="line">I said: There are 10 types of people..</div><div class="line">I also said: 'Those who know binary and those who don<span class="string">'t.'</span>.</div><div class="line">Isn<span class="string">'t that joke so funny?! false</span></div><div class="line">This is the left side of...a string with a right side.</div></pre></td></tr></table></figure>
<h2 id="习题-7-更多输出"><a href="#习题-7-更多输出" class="headerlink" title="习题 7 更多输出"></a>习题 7 更多输出</h2><p>这道题是复习输出相关的知识，对应 <code>ex7.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">puts <span class="string">"Mary had a little lamb."</span></div><div class="line">puts <span class="string">"Its fleece was white as %s."</span> % <span class="string">'snow'</span></div><div class="line">puts <span class="string">"And everywhere that Mary went."</span></div><div class="line">puts <span class="string">"."</span> * <span class="number">10</span>  <span class="comment"># what'd that do?</span></div><div class="line"></div><div class="line">end1 = <span class="string">"C"</span></div><div class="line">end2 = <span class="string">"h"</span></div><div class="line">end3 = <span class="string">"e"</span></div><div class="line">end4 = <span class="string">"e"</span></div><div class="line">end5 = <span class="string">"s"</span></div><div class="line">end6 = <span class="string">"e"</span></div><div class="line">end7 = <span class="string">"B"</span></div><div class="line">end8 = <span class="string">"u"</span></div><div class="line">end9 = <span class="string">"r"</span></div><div class="line">end1<span class="number">0</span> = <span class="string">"g"</span></div><div class="line">end11 = <span class="string">"e"</span></div><div class="line">end12 = <span class="string">"r"</span></div><div class="line"></div><div class="line"><span class="comment"># notice how we are using print instead of puts here. change it to puts</span></div><div class="line"><span class="comment"># and see what happens.</span></div><div class="line">puts end1 + end2 + end3 + end4 + end5 + end6</div><div class="line">puts end7 + end8 + end9 + end1<span class="number">0</span> + end11 + end12</div></pre></td></tr></table></figure>
<p>结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex7.rb</div><div class="line">Mary had a little lamb.</div><div class="line">Its fleece was white as snow.</div><div class="line">And everywhere that Mary went.</div><div class="line">..........</div><div class="line">Cheese</div><div class="line">Burger</div></pre></td></tr></table></figure>
<h2 id="习题-8-输出-输出"><a href="#习题-8-输出-输出" class="headerlink" title="习题 8 输出 输出"></a>习题 8 输出 输出</h2><p>这道题还是复习输出相关的知识，对应 <code>ex8.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">formatter = <span class="string">"%s %s %s %s"</span></div><div class="line"></div><div class="line">puts formatter % [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line">puts formatter % [<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>, <span class="string">"four"</span>]</div><div class="line">puts formatter % [<span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">true</span>]</div><div class="line">puts formatter % [formatter, formatter, formatter, formatter]</div><div class="line">puts formatter % [</div><div class="line">    <span class="string">"I had this thing."</span>,</div><div class="line">    <span class="string">"That you could type up right."</span>,</div><div class="line">    <span class="string">"But it didn't sing."</span>,</div><div class="line">    <span class="string">"So I said goodnight."</span></div><div class="line">]</div></pre></td></tr></table></figure>
<p>结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex8.rb</div><div class="line">1 2 3 4</div><div class="line">one two three four</div><div class="line"><span class="literal">true</span> <span class="literal">false</span> <span class="literal">false</span> <span class="literal">true</span></div><div class="line">%s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s</div><div class="line">I had this thing. That you could <span class="built_in">type</span> up right. But it didn<span class="string">'t sing. So I said goodnight.</span></div></pre></td></tr></table></figure>
<h2 id="习题-9-输出-输出-再输出"><a href="#习题-9-输出-输出-再输出" class="headerlink" title="习题 9 输出 输出 再输出"></a>习题 9 输出 输出 再输出</h2><p>这道题仍然是复习输出相关的知识，对应 <code>ex9.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="comment"># Here's some new strange stuff, remember type it exactly.</span></div><div class="line"></div><div class="line">days = <span class="string">"Mon Tue Wed Thu Fri Sat Sun"</span></div><div class="line">months = <span class="string">"Jan\nFeb\nMar\nApr\nMay\nJun\nJul\nAug"</span></div><div class="line"></div><div class="line">puts <span class="string">"Here are the days: "</span>, days</div><div class="line">puts <span class="string">"Here are the months: "</span>, months</div><div class="line"></div><div class="line">puts &lt;&lt;PARAGRAPH</div><div class="line">There<span class="string">'s something going on here.</span></div><div class="line">With the three double-quotes.</div><div class="line">We'll be able to type as much as we like.</div><div class="line">Even <span class="number">4</span> lines <span class="keyword">if</span> we want, <span class="keyword">or</span> <span class="number">5</span>, <span class="keyword">or</span> <span class="number">6</span>.</div><div class="line">PARAGRAPH</div></pre></td></tr></table></figure>
<p>这里注意最后输出一段话的语法，结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex9.rb</div><div class="line">Here are the days:</div><div class="line">Mon Tue Wed Thu Fri Sat Sun</div><div class="line">Here are the months:</div><div class="line">Jan</div><div class="line">Feb</div><div class="line">Mar</div><div class="line">Apr</div><div class="line">May</div><div class="line">Jun</div><div class="line">Jul</div><div class="line">Aug</div><div class="line">There<span class="string">'s something going on here.</span></div><div class="line">With the three double-quotes.</div><div class="line">We'll be able to <span class="built_in">type</span> as much as we like.</div><div class="line">Even 4 lines <span class="keyword">if</span> we want, or 5, or 6.</div></pre></td></tr></table></figure>
<h2 id="习题-10-那是什么？"><a href="#习题-10-那是什么？" class="headerlink" title="习题 10 那是什么？"></a>习题 10 那是什么？</h2><p>上一道题中出现了两个知识点，一个是转义符号，另一个是输出段落，具体参考 <code>ex10.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">tabby_cat = <span class="string">"\tI'm tabbed in."</span></div><div class="line">persian_cat = <span class="string">"I'm split\non a line."</span></div><div class="line">backslash_cat = <span class="string">"I'm \\ a \\ cat."</span></div><div class="line"></div><div class="line">fat_cat = &lt;&lt;MY_HEREDOC</div><div class="line">I<span class="string">'ll do a list:</span></div><div class="line">\t* Cat food</div><div class="line">\t* Fishies</div><div class="line">\t* Catnip\n\t* Grass</div><div class="line">MY_HEREDOC</div><div class="line"></div><div class="line">puts tabby_cat</div><div class="line">puts persian_cat</div><div class="line">puts backslash_cat</div><div class="line">puts fat_cat</div></pre></td></tr></table></figure>
<p>结果为 </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex10.rb</div><div class="line">	I<span class="string">'m tabbed in.</span></div><div class="line">I'm split</div><div class="line">on a line.</div><div class="line">I<span class="string">'m \ a \ cat.</span></div><div class="line">I'll <span class="keyword">do</span> a list:</div><div class="line">	* Cat food</div><div class="line">	* Fishies</div><div class="line">	* Catnip</div><div class="line">	* Grass</div></pre></td></tr></table></figure>
<h2 id="习题-11-输入"><a href="#习题-11-输入" class="headerlink" title="习题 11 输入"></a>习题 11 输入</h2><p>这一题我们来尝试让用户输入点什么，参考 <code>ex11.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">print <span class="string">"How old are you? "</span></div><div class="line">age = gets.chomp()</div><div class="line">print <span class="string">"How tall are you? "</span></div><div class="line">height = gets.chomp()</div><div class="line">print <span class="string">"How much do you weigh? "</span></div><div class="line">weight = gets.chomp()</div><div class="line"></div><div class="line">puts <span class="string">"So, you're <span class="subst">#&#123;age&#125;</span> old, <span class="subst">#&#123;height&#125;</span> tall and <span class="subst">#&#123;weight&#125;</span> heavy."</span></div></pre></td></tr></table></figure>
<p>这里用 <code>print</code> 是为了不换行，结果为：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex11.rb</div><div class="line">How old are you? 25</div><div class="line">How tall are you? 173</div><div class="line">How much <span class="keyword">do</span> you weigh? 65</div><div class="line">So, you<span class="string">'re 25 old, 173 tall and 65 heavy.</span></div></pre></td></tr></table></figure>
<h2 id="习题-12-模块-Module"><a href="#习题-12-模块-Module" class="headerlink" title="习题 12 模块 Module"></a>习题 12 模块 Module</h2><p><code>require</code> 关键字用于包含文件（只加载一次，可以不加后缀名），<code>include</code> 用于包含模块，具体可以参考 <code>ex12.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'open-uri'</span></div><div class="line"></div><div class="line">open(<span class="string">"http://www.ruby-lang.org/en"</span>) <span class="keyword">do</span> <span class="params">|f|</span></div><div class="line">  f.each_line &#123;<span class="params">|line|</span> p line&#125;</div><div class="line">  puts f.base_uri         <span class="comment"># &lt;URI::HTTP:0x40e6ef2 URL:http://www.ruby-lang.org/en/&gt;</span></div><div class="line">  puts f.content_type     <span class="comment"># "text/html"</span></div><div class="line">  puts f.charset          <span class="comment"># "iso-8859-1"</span></div><div class="line">  puts f.content_encoding <span class="comment"># []</span></div><div class="line">  puts f.last_modified    <span class="comment"># Thu Dec 05 02:45:02 UTC 2002</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>结果为（省略后面）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex12.rb</div><div class="line"><span class="string">"&lt;!DOCTYPE html&gt;\n"</span></div><div class="line"><span class="string">"&lt;html&gt;\n"</span></div><div class="line"><span class="string">"  &lt;head&gt;\n"</span></div><div class="line"><span class="string">"    \n"</span></div><div class="line"><span class="string">"    &lt;title&gt;Ruby Programming Language&lt;/title&gt;\n"</span></div><div class="line"><span class="string">"    \n"</span></div><div class="line"><span class="string">"\n"</span></div></pre></td></tr></table></figure>
<p>注意，查找的时候不会查找相对路径，只会查找系统的文件。</p>
<h2 id="习题-13-参数与解包"><a href="#习题-13-参数与解包" class="headerlink" title="习题 13 参数与解包"></a>习题 13 参数与解包</h2><p>这次我们来看看如何处理命令行参数，参考 <code>ex13.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">first, second, third = ARGV</div><div class="line"></div><div class="line">puts <span class="string">"The script is called: <span class="subst">#&#123;$0&#125;</span>"</span></div><div class="line">puts <span class="string">"Your first variable is: <span class="subst">#&#123;first&#125;</span>"</span></div><div class="line">puts <span class="string">"Your second variable is: <span class="subst">#&#123;second&#125;</span>"</span></div><div class="line">puts <span class="string">"Your third variable is: <span class="subst">#&#123;third&#125;</span>"</span></div></pre></td></tr></table></figure>
<p>这里 <code>$0</code> 是脚本本身的名称，后面是具体的参数，来看具体执行的例子：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex13.rb first second third</div><div class="line">The script is called: ex13.rb</div><div class="line">Your first variable is: first</div><div class="line">Your second variable is: second</div><div class="line">Your third variable is: third</div></pre></td></tr></table></figure>
<h2 id="习题-14-提示和传递"><a href="#习题-14-提示和传递" class="headerlink" title="习题 14 提示和传递"></a>习题 14 提示和传递</h2><p>这里我们结合前面的内容，在传入命令行参数的同时，让用户输入内容，注意，这里一定要使用 <code>STDIN.gets</code>，不然会把命令行参数也当做输入，具体见 <code>ex14.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">user = ARGV.first</div><div class="line">prompt = <span class="string">'&gt; '</span></div><div class="line"></div><div class="line">puts <span class="string">"Hi <span class="subst">#&#123;user&#125;</span>, I'm the <span class="subst">#&#123;$0&#125;</span> script."</span></div><div class="line">puts <span class="string">"I'd like to ask you a few questions."</span></div><div class="line">puts <span class="string">"Do you like me <span class="subst">#&#123;user&#125;</span>?"</span></div><div class="line">print prompt</div><div class="line">likes = STDIN.gets.chomp()</div><div class="line"></div><div class="line">puts <span class="string">"Where do you live <span class="subst">#&#123;user&#125;</span>?"</span></div><div class="line">print prompt</div><div class="line">lives = STDIN.gets.chomp()</div><div class="line"></div><div class="line">puts <span class="string">"What kind of computer do you have?"</span></div><div class="line">print prompt</div><div class="line">computer = STDIN.gets.chomp()</div><div class="line"></div><div class="line">puts &lt;&lt;MESSAGE</div><div class="line">Alright, so you said <span class="comment">#&#123;likes&#125; about liking me.</span></div><div class="line">You live <span class="keyword">in</span> <span class="comment">#&#123;lives&#125;.  Not sure where that is.</span></div><div class="line">And you have a <span class="comment">#&#123;computer&#125; computer.  Nice.</span></div><div class="line">MESSAGE</div></pre></td></tr></table></figure>
<p>具体使用的效果是：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex14.rb wdxtub</div><div class="line">Hi wdxtub, I<span class="string">'m the ex14.rb script.</span></div><div class="line">I'd like to ask you a few questions.</div><div class="line">Do you like me wdxtub?</div><div class="line">&gt; Very Much</div><div class="line">Where <span class="keyword">do</span> you live wdxtub?</div><div class="line">&gt; China</div><div class="line">What kind of computer <span class="keyword">do</span> you have?</div><div class="line">&gt; Mac</div><div class="line">Alright, so you said Very Much about liking me.</div><div class="line">You live <span class="keyword">in</span> China.  Not sure <span class="built_in">where</span> that is.</div><div class="line">And you have a Mac computer.  Nice.</div></pre></td></tr></table></figure>
<h2 id="习题-15-读取文件"><a href="#习题-15-读取文件" class="headerlink" title="习题 15 读取文件"></a>习题 15 读取文件</h2><p>这次我们来练习读取文件，我们的内容保存在 <code>ex15_content.txt</code> 中:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">我有一只小毛驴</div><div class="line">我从来都不骑</div><div class="line">小邋遢，真呀真邋遢</div></pre></td></tr></table></figure>
<p>具体代码在 <code>ex15.rb</code> 中，我们从命令行获取文件名：</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">filename = ARGV.first</div><div class="line"></div><div class="line">prompt = <span class="string">"&gt; "</span></div><div class="line">txt = File.open(filename)</div><div class="line"></div><div class="line">puts <span class="string">"Here's your file: <span class="subst">#&#123;filename&#125;</span>"</span></div><div class="line">puts txt.read()</div><div class="line"></div><div class="line">puts <span class="string">"Type the filename again:"</span></div><div class="line">print prompt</div><div class="line">file_again = STDIN.gets.chomp()</div><div class="line"></div><div class="line">txt_again = File.open(file_again)</div><div class="line"></div><div class="line">puts txt_again.read()</div></pre></td></tr></table></figure>
<p>具体测试为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex15.rb ex15_content.txt</div><div class="line">Here<span class="string">'s your file: ex15_content.txt</span></div><div class="line">我有一只小毛驴</div><div class="line">我从来都不骑</div><div class="line">小邋遢，真呀真邋遢</div><div class="line">Type the filename again:</div><div class="line">&gt; ex15_content.txt</div><div class="line">我有一只小毛驴</div><div class="line">我从来都不骑</div><div class="line">小邋遢，真呀真邋遢</div></pre></td></tr></table></figure>
<h2 id="习题-16-读写文件"><a href="#习题-16-读写文件" class="headerlink" title="习题 16 读写文件"></a>习题 16 读写文件</h2><p>基本看代码也能明白具体的操作，和 Python 还是很类似的，具体参见 <code>ex16.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">filename = ARGV.first</div><div class="line">script = $0</div><div class="line"></div><div class="line">puts <span class="string">"We're going to erase <span class="subst">#&#123;filename&#125;</span>."</span></div><div class="line">puts <span class="string">"If you don't want that, hit CTRL-C (^C)."</span></div><div class="line">puts <span class="string">"If you do want that, hit RETURN."</span></div><div class="line"></div><div class="line">print <span class="string">"? "</span></div><div class="line">STDIN.gets</div><div class="line"></div><div class="line">puts <span class="string">"Opening the file..."</span></div><div class="line">target = File.open(filename, <span class="string">'w'</span>)</div><div class="line"></div><div class="line">puts <span class="string">"Truncating the file.  Goodbye!"</span></div><div class="line">target.truncate(target.size)</div><div class="line"></div><div class="line">puts <span class="string">"Now I'm going to ask you for three lines."</span></div><div class="line"></div><div class="line">print <span class="string">"line 1: "</span>; line1 = STDIN.gets.chomp()</div><div class="line">print <span class="string">"line 2: "</span>; line2 = STDIN.gets.chomp()</div><div class="line">print <span class="string">"line 3: "</span>; line3 = STDIN.gets.chomp()</div><div class="line"></div><div class="line">puts <span class="string">"I'm going to write these to the file."</span></div><div class="line"></div><div class="line">target.write(line1)</div><div class="line">target.write(<span class="string">"\n"</span>)</div><div class="line">target.write(line2)</div><div class="line">target.write(<span class="string">"\n"</span>)</div><div class="line">target.write(line3)</div><div class="line">target.write(<span class="string">"\n"</span>)</div><div class="line"></div><div class="line">puts <span class="string">"And finally, we close it."</span></div><div class="line">target.close()</div></pre></td></tr></table></figure>
<p>用起来是 </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex16.rb test.txt</div><div class="line">We<span class="string">'re going to erase test.txt.</span></div><div class="line">If you don't want that, hit CTRL-C (^C).</div><div class="line">If you <span class="keyword">do</span> want that, hit RETURN.</div><div class="line">?</div><div class="line">Opening the file...</div><div class="line">Truncating the file.  Goodbye!</div><div class="line">Now I<span class="string">'m going to ask you for three lines.</span></div><div class="line">line 1: This is line 1</div><div class="line">line 2: This is line 2</div><div class="line">line 3: This is line 3</div><div class="line">I'm going to write these to the file.</div><div class="line">And finally, we close it.</div><div class="line"></div><div class="line"><span class="comment"># dawang at wdxtub.local</span></div><div class="line">$ cat test.txt</div><div class="line">This is line 1</div><div class="line">This is line 2</div><div class="line">This is line 3</div></pre></td></tr></table></figure>
<h2 id="习题-17-更多文件操作"><a href="#习题-17-更多文件操作" class="headerlink" title="习题 17 更多文件操作"></a>习题 17 更多文件操作</h2><p>这里我们把一个文件中的内容拷贝到另一个文件中，参见 <code>ex17.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">from_file, to_file = ARGV</div><div class="line">script = $0</div><div class="line"></div><div class="line">puts <span class="string">"Copying from <span class="subst">#&#123;from_file&#125;</span> to <span class="subst">#&#123;to_file&#125;</span>"</span></div><div class="line"></div><div class="line"><span class="comment"># we could do these two on one line too, how?</span></div><div class="line">input = File.open(from_file)</div><div class="line">indata = input.read()</div><div class="line"></div><div class="line">puts <span class="string">"The input file is <span class="subst">#&#123;indata.length&#125;</span> bytes long"</span></div><div class="line"></div><div class="line">puts <span class="string">"Does the output file exist? <span class="subst">#&#123;File.exists? to_file&#125;</span>"</span></div><div class="line">puts <span class="string">"Ready, hit RETURN to continue, CTRL-C to abort."</span></div><div class="line">STDIN.gets</div><div class="line"></div><div class="line">output = File.open(to_file, <span class="string">'w'</span>)</div><div class="line">output.write(indata)</div><div class="line"></div><div class="line">puts <span class="string">"Alright, all done."</span></div><div class="line"></div><div class="line">output.close()</div><div class="line">input.close()</div></pre></td></tr></table></figure>
<p>这里我们使用 <code>File.exists?</code> 来判断 <code>to_file</code> 是否存在，这是一个很方便的用法。具体的结果是</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex17.rb test.txt copied.txt</div><div class="line">Copying from test.txt to copied.txt</div><div class="line">The input file is 45 bytes long</div><div class="line">Does the output file exist? <span class="literal">false</span></div><div class="line">Ready, hit RETURN to <span class="built_in">continue</span>, CTRL-C to abort.</div><div class="line"></div><div class="line">Alright, all done.</div></pre></td></tr></table></figure>
<h2 id="习题-18-命名-变量-函数"><a href="#习题-18-命名-变量-函数" class="headerlink" title="习题 18 命名 变量 函数"></a>习题 18 命名 变量 函数</h2><p>这一次我们来接触函数，具体的用法也很简单，参考 <code>ex18.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="comment"># this one is like your scripts with argv</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">puts_two</span><span class="params">(*args)</span></span></div><div class="line">  arg1, arg2 = args</div><div class="line">  puts <span class="string">"arg1: <span class="subst">#&#123;arg1&#125;</span>, arg2: <span class="subst">#&#123;arg2&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment"># ok, that *args is actually pointless, we can just do this</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">puts_two_again</span><span class="params">(arg1, arg2)</span></span></div><div class="line">  puts <span class="string">"arg1: <span class="subst">#&#123;arg1&#125;</span>, arg2: <span class="subst">#&#123;arg2&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment"># this just takes one argument</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">puts_one</span><span class="params">(arg1)</span></span></div><div class="line">  puts <span class="string">"arg1: <span class="subst">#&#123;arg1&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment"># this one takes no arguments</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">puts_none</span><span class="params">()</span></span></div><div class="line">  puts <span class="string">"I got nothin'."</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">puts_two(<span class="string">"Da"</span>,<span class="string">"Wang"</span>)</div><div class="line">puts_two_again(<span class="string">"Da"</span>,<span class="string">"Wang"</span>)</div><div class="line">puts_one(<span class="string">"First!"</span>)</div><div class="line">puts_none()</div></pre></td></tr></table></figure>
<p>运行一下，我们可以发现结果如下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex18.rb</div><div class="line">arg1: Da, arg2: Wang</div><div class="line">arg1: Da, arg2: Wang</div><div class="line">arg1: First!</div><div class="line">I got nothin<span class="string">'.</span></div></pre></td></tr></table></figure>
<h2 id="习题-19-函数和变量"><a href="#习题-19-函数和变量" class="headerlink" title="习题 19 函数和变量"></a>习题 19 函数和变量</h2><p>函数中的变量，和程序中的变量是不一样，具体参见 <code>ex19.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">cheese_and_crackers</span><span class="params">(cheese_count, boxes_of_crackers)</span></span></div><div class="line">  puts <span class="string">"You have <span class="subst">#&#123;cheese_count&#125;</span> cheeses!"</span></div><div class="line">  puts <span class="string">"You have <span class="subst">#&#123;boxes_of_crackers&#125;</span> boxes of crackers!"</span></div><div class="line">  puts <span class="string">"Man that's enough for a party!"</span></div><div class="line">  puts <span class="string">"Get a blanket."</span></div><div class="line">  puts <span class="comment"># a blank line</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">puts <span class="string">"We can just give the function numbers directly:"</span></div><div class="line">cheese_and_crackers(<span class="number">20</span>, <span class="number">30</span>)</div><div class="line"></div><div class="line">puts <span class="string">"OR, we can use variables from our script:"</span></div><div class="line">amount_of_cheese = <span class="number">10</span></div><div class="line">amount_of_crackers = <span class="number">50</span></div><div class="line">cheese_and_crackers(amount_of_cheese, amount_of_crackers)</div><div class="line"></div><div class="line">puts <span class="string">"We can even do math inside too:"</span></div><div class="line">cheese_and_crackers(<span class="number">10</span> + <span class="number">20</span>, <span class="number">5</span> + <span class="number">6</span>)</div><div class="line"></div><div class="line">puts <span class="string">"And we can combine the two, variables and math:"</span></div><div class="line">cheese_and_crackers(amount_of_cheese + <span class="number">100</span>, amount_of_crackers + <span class="number">1000</span>)</div></pre></td></tr></table></figure>
<p>得到的结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex19.rb</div><div class="line">We can just give the <span class="keyword">function</span> numbers directly:</div><div class="line">You have 20 cheeses!</div><div class="line">You have 30 boxes of crackers!</div><div class="line">Man that<span class="string">'s enough for a party!</span></div><div class="line">Get a blanket.</div><div class="line"></div><div class="line">OR, we can use variables from our script:</div><div class="line">You have 10 cheeses!</div><div class="line">You have 50 boxes of crackers!</div><div class="line">Man that's enough <span class="keyword">for</span> a party!</div><div class="line">Get a blanket.</div><div class="line"></div><div class="line">We can even <span class="keyword">do</span> math inside too:</div><div class="line">You have 30 cheeses!</div><div class="line">You have 11 boxes of crackers!</div><div class="line">Man that<span class="string">'s enough for a party!</span></div><div class="line">Get a blanket.</div><div class="line"></div><div class="line">And we can combine the two, variables and math:</div><div class="line">You have 110 cheeses!</div><div class="line">You have 1050 boxes of crackers!</div><div class="line">Man that's enough <span class="keyword">for</span> a party!</div><div class="line">Get a blanket.</div></pre></td></tr></table></figure>
<h2 id="习题-20-函数与文件"><a href="#习题-20-函数与文件" class="headerlink" title="习题 20 函数与文件"></a>习题 20 函数与文件</h2><p>这一次我们结合函数和文件操作，具体参考 <code>ex20.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">input_file = ARGV[<span class="number">0</span>]</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_all</span><span class="params">(f)</span></span></div><div class="line">  puts f.read()</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">rewind</span><span class="params">(f)</span></span></div><div class="line">  f.seek(<span class="number">0</span>, IO::SEEK_SET)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_a_line</span><span class="params">(line_count, f)</span></span></div><div class="line">  puts <span class="string">"<span class="subst">#&#123;line_count&#125;</span> <span class="subst">#&#123;f.readline()&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">current_file = File.open(input_file)</div><div class="line"></div><div class="line">puts <span class="string">"First let's print the whole file:"</span></div><div class="line">puts <span class="comment"># a blank line</span></div><div class="line"></div><div class="line">print_all(current_file)</div><div class="line"></div><div class="line">puts <span class="string">"Now let's rewind, kind of like a tape."</span></div><div class="line"></div><div class="line">rewind(current_file)</div><div class="line"></div><div class="line">puts <span class="string">"Let's print three lines:"</span></div><div class="line"></div><div class="line">current_line = <span class="number">1</span></div><div class="line">print_a_line(current_line, current_file)</div><div class="line"></div><div class="line">current_line = current_line + <span class="number">1</span></div><div class="line">print_a_line(current_line, current_file)</div><div class="line"></div><div class="line">current_line = current_line + <span class="number">1</span></div><div class="line">print_a_line(current_line, current_file)</div></pre></td></tr></table></figure>
<p>结果为 </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ ruby ex20.rb test.txt</div><div class="line">First let&apos;s print the whole file:</div><div class="line"></div><div class="line">This is line 1</div><div class="line">This is line 2</div><div class="line">This is line 3</div><div class="line">Now let&apos;s rewind, kind of like a tape.</div><div class="line">Let&apos;s print three lines:</div><div class="line">1 This is line 1</div><div class="line">2 This is line 2</div><div class="line">3 This is line 3</div></pre></td></tr></table></figure>
<h2 id="习题-21-函数返回值"><a href="#习题-21-函数返回值" class="headerlink" title="习题 21 函数返回值"></a>习题 21 函数返回值</h2><p>在函数中，最后得到的结果，会变成返回值，可以直接使用，具体参考 <code>ex21.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a, b)</span></span></div><div class="line">  puts <span class="string">"ADDING <span class="subst">#&#123;a&#125;</span> + <span class="subst">#&#123;b&#125;</span>"</span></div><div class="line">  a + b</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">subtract</span><span class="params">(a, b)</span></span></div><div class="line">  puts <span class="string">"SUBTRACTING <span class="subst">#&#123;a&#125;</span> - <span class="subst">#&#123;b&#125;</span>"</span></div><div class="line">  a - b</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">multiply</span><span class="params">(a, b)</span></span></div><div class="line">  puts <span class="string">"MULTIPLYING <span class="subst">#&#123;a&#125;</span> * <span class="subst">#&#123;b&#125;</span>"</span></div><div class="line">  a * b</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">divide</span><span class="params">(a, b)</span></span></div><div class="line">  puts <span class="string">"DIVIDING <span class="subst">#&#123;a&#125;</span> / <span class="subst">#&#123;b&#125;</span>"</span></div><div class="line">  a / b</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">puts <span class="string">"Let's do some math with just functions!"</span></div><div class="line"></div><div class="line">age = add(<span class="number">30</span>, <span class="number">5</span>)</div><div class="line">height = subtract(<span class="number">78</span>,<span class="number">4</span>)</div><div class="line">weight = multiply(<span class="number">90</span>, <span class="number">2</span>)</div><div class="line">iq = divide(<span class="number">100</span>, <span class="number">2</span>)</div><div class="line"></div><div class="line">puts <span class="string">"Age: <span class="subst">#&#123;age&#125;</span>, Height: <span class="subst">#&#123;height&#125;</span>, Weight: <span class="subst">#&#123;weight&#125;</span>, IQ: <span class="subst">#&#123;iq&#125;</span>"</span></div><div class="line"></div><div class="line"><span class="comment"># A puzzle for the extra credit, type it in anyway.</span></div><div class="line">puts <span class="string">"Here is a puzzle."</span></div><div class="line"></div><div class="line">what = add(age, subtract(height, multiply(weight, divide(iq, <span class="number">2</span>))))</div><div class="line"></div><div class="line">puts <span class="string">"That becomes: <span class="subst">#&#123;what&#125;</span> Can you do it by hand?"</span></div></pre></td></tr></table></figure>
<p>结果为 </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex21.rb</div><div class="line">Let<span class="string">'s do some math with just functions!</span></div><div class="line">ADDING 30 + 5</div><div class="line">SUBTRACTING 78 - 4</div><div class="line">MULTIPLYING 90 * 2</div><div class="line">DIVIDING 100 / 2</div><div class="line">Age: 35, Height: 74, Weight: 180, IQ: 50</div><div class="line">Here is a puzzle.</div><div class="line">DIVIDING 50 / 2</div><div class="line">MULTIPLYING 180 * 25</div><div class="line">SUBTRACTING 74 - 4500</div><div class="line">ADDING 35 + -4426</div><div class="line">That becomes: -4391 Can you do it by hand?</div></pre></td></tr></table></figure>
<h2 id="习题-22-目前我们学了什么？"><a href="#习题-22-目前我们学了什么？" class="headerlink" title="习题 22 目前我们学了什么？"></a>习题 22 目前我们学了什么？</h2><p>前面每一节的内容都比较简单，但是结合起来内容还是不少的。来看看到目前为止我们应该掌握的内容：</p>
<ul>
<li>添加注释</li>
<li>进行基本数学运算</li>
<li>使用变量</li>
<li>格式化输出</li>
<li>输入</li>
<li>模块</li>
<li>参数</li>
<li>读写文件</li>
<li>函数与返回值</li>
</ul>
<h2 id="习题-23-阅读代码"><a href="#习题-23-阅读代码" class="headerlink" title="习题 23 阅读代码"></a>习题 23 阅读代码</h2><p>一些比较好的代码来源</p>
<ul>
<li>github.com</li>
<li>heroku.com</li>
<li>rubygems.org</li>
<li>bitbucket.org</li>
</ul>
<h2 id="习题-24-复习一下"><a href="#习题-24-复习一下" class="headerlink" title="习题 24 复习一下"></a>习题 24 复习一下</h2><p>仔细阅读这一部分的代码，复习之前学过的内容，参考 <code>ex24.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">puts <span class="string">"Let's practice everything."</span></div><div class="line">puts <span class="string">"You\'d need to know \'bout escapes with \\ that do \n newlines and \t tabs."</span></div><div class="line"></div><div class="line">poem = &lt;&lt;MULTI_LINE_STRING</div><div class="line"></div><div class="line">\tThe lovely world</div><div class="line">with logic so firmly planted</div><div class="line">cannot discern \n the needs of love</div><div class="line">nor comprehend passion from intuition</div><div class="line"><span class="keyword">and</span> requires an explanation</div><div class="line">\n\t\twhere there is none.</div><div class="line"></div><div class="line">MULTI_LINE_STRING</div><div class="line"></div><div class="line">puts <span class="string">"--------------"</span></div><div class="line">puts poem</div><div class="line">puts <span class="string">"--------------"</span></div><div class="line"></div><div class="line">five = <span class="number">10</span> - <span class="number">2</span> + <span class="number">3</span> - <span class="number">6</span></div><div class="line">puts <span class="string">"This should be five: <span class="subst">#&#123;five&#125;</span>"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">secret_formula</span><span class="params">(started)</span></span></div><div class="line">  jelly_beans = started * <span class="number">500</span></div><div class="line">  jars = jelly_beans / <span class="number">1000</span></div><div class="line">  crates = jars / <span class="number">100</span></div><div class="line">  <span class="keyword">return</span> jelly_beans, jars, crates</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">start_point = <span class="number">10000</span></div><div class="line">beans, jars, crates = secret_formula(start_point)</div><div class="line"></div><div class="line">puts <span class="string">"With a starting point of: <span class="subst">#&#123;start_point&#125;</span>"</span></div><div class="line">puts <span class="string">"We'd have <span class="subst">#&#123;beans&#125;</span> beans, <span class="subst">#&#123;jars&#125;</span> jars, and <span class="subst">#&#123;crates&#125;</span> crates."</span></div><div class="line"></div><div class="line">start_point = start_point / <span class="number">10</span></div><div class="line"></div><div class="line">puts <span class="string">"We can also do that this way:"</span></div><div class="line">puts <span class="string">"We'd have %s beans, %s jars, and %s crates."</span> % secret_formula(start_point)</div></pre></td></tr></table></figure>
<h2 id="习题-25-导入自定义模块"><a href="#习题-25-导入自定义模块" class="headerlink" title="习题 25 导入自定义模块"></a>习题 25 导入自定义模块</h2><p>这一次我们把代码导入到 irb 中，交互执行，代码部分参加 <code>ex25.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">module</span> <span class="title">Ex25</span></span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">break_words</span><span class="params">(stuff)</span></span></div><div class="line">    <span class="comment"># This function will break up words for us.</span></div><div class="line">    words = stuff.split(<span class="string">' '</span>)</div><div class="line">    words</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">sort_words</span><span class="params">(words)</span></span></div><div class="line">    <span class="comment"># Sorts the words.</span></div><div class="line">    words.sort()</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">print_first_word</span><span class="params">(words)</span></span></div><div class="line">    <span class="comment"># Prints the first word and shifts the others down by one.</span></div><div class="line">    word = words.shift()</div><div class="line">    puts word</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">print_last_word</span><span class="params">(words)</span></span></div><div class="line">    <span class="comment"># Prints the last word after popping it off the end.</span></div><div class="line">    word = words.pop()</div><div class="line">    puts word</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">sort_sentence</span><span class="params">(sentence)</span></span></div><div class="line">    <span class="comment"># Takes in a full sentence and returns the sorted words.</span></div><div class="line">    words = break_words(sentence)</div><div class="line">    sort_words(words)</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">print_first_and_last</span><span class="params">(sentence)</span></span></div><div class="line">    <span class="comment"># Prints the first and last words of the sentence.</span></div><div class="line">    words = break_words(sentence)</div><div class="line">    print_first_word(words)</div><div class="line">    print_last_word(words)</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">print_first_and_last_sorted</span><span class="params">(sentence)</span></span></div><div class="line">    <span class="comment"># Sorts the words then prints the first and last one.</span></div><div class="line">    words = sort_sentence(sentence)</div><div class="line">    print_first_word(words)</div><div class="line">    print_last_word(words)</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>在交互模式下的操作为：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ irb</div><div class="line">irb(main):001:0&gt; require <span class="string">'./ex25'</span></div><div class="line">=&gt; <span class="literal">true</span></div><div class="line">irb(main):002:0&gt; sentence = <span class="string">"All good things come to those who wait."</span></div><div class="line">=&gt; <span class="string">"All good things come to those who wait."</span></div><div class="line">irb(main):003:0&gt; words = Ex25.break_words(sentence)</div><div class="line">=&gt; [<span class="string">"All"</span>, <span class="string">"good"</span>, <span class="string">"things"</span>, <span class="string">"come"</span>, <span class="string">"to"</span>, <span class="string">"those"</span>, <span class="string">"who"</span>, <span class="string">"wait."</span>]</div><div class="line">irb(main):004:0&gt; sorted_words = Ex25.sort_words(words)</div><div class="line">=&gt; [<span class="string">"All"</span>, <span class="string">"come"</span>, <span class="string">"good"</span>, <span class="string">"things"</span>, <span class="string">"those"</span>, <span class="string">"to"</span>, <span class="string">"wait."</span>, <span class="string">"who"</span>]</div><div class="line">irb(main):005:0&gt; Ex25.print_first_word(words)</div><div class="line">All</div><div class="line">=&gt; nil</div><div class="line">irb(main):006:0&gt; Ex25.print_last_word(words)</div><div class="line">wait.</div><div class="line">=&gt; nil</div><div class="line">irb(main):007:0&gt; Ex25.sort_sentence(sentence)</div><div class="line">=&gt; [<span class="string">"All"</span>, <span class="string">"come"</span>, <span class="string">"good"</span>, <span class="string">"things"</span>, <span class="string">"those"</span>, <span class="string">"to"</span>, <span class="string">"wait."</span>, <span class="string">"who"</span>]</div><div class="line">irb(main):008:0&gt;</div></pre></td></tr></table></figure>
<h2 id="习题-26-小测"><a href="#习题-26-小测" class="headerlink" title="习题 26 小测"></a>习题 26 小测</h2><p>从<a href="">这里</a>复制代码并命名为 <code>ex26.rb</code>，然后修改错误，错误大多是拼写错误、括号没有匹配，如果有一个能够代码高亮的编辑器，就能很快找到错误所在，改完之后的代码</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">module</span> <span class="title">Ex25</span></span></div><div class="line"></div><div class="line">  <span class="comment"># This function will break up words for us.</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">Ex25</span>.<span class="title">break_words</span><span class="params">(stuff)</span></span></div><div class="line">    word = stuff.split(<span class="string">' '</span>)</div><div class="line">    <span class="keyword">return</span> word</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="comment"># Sorts the words.</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">Ex25</span>.<span class="title">sort_words</span><span class="params">(words)</span></span></div><div class="line">    <span class="keyword">return</span> words.sort</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="comment"># Prints the first word after popping it off.</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">Ex25</span>.<span class="title">print_first_word</span><span class="params">(words)</span></span></div><div class="line">    word = words.pop(<span class="number">1</span>)</div><div class="line">    puts word</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="comment"># Prints the last word after popping it off.</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">Ex25</span>.<span class="title">print_last_word</span><span class="params">(words)</span></span></div><div class="line">    word = words.pop</div><div class="line">    puts word</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="comment"># Takes in a full sentence and returns the sorted words.</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">Ex25</span>.<span class="title">sort_sentence</span><span class="params">(sentence)</span></span></div><div class="line">    words = Ex25.break_words(sentence)</div><div class="line">    <span class="keyword">return</span> Ex25.sort_words(words)</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="comment"># Prints the first and last words of the sentence.</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">Ex25</span>.<span class="title">print_first_and_last</span><span class="params">(sentence)</span></span></div><div class="line">    words = Ex25.break_words(sentence)</div><div class="line">    Ex25.print_first_word(words)</div><div class="line">    Ex25.print_last_word(words)</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="comment"># Sorts the words then prints the first and last one.</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">Ex25</span>.<span class="title">print_first_and_last_sorted</span><span class="params">(sentence)</span></span></div><div class="line">    words = Ex25.sort_sentence(sentence)</div><div class="line">    Ex25.print_first_word(words)</div><div class="line">    Ex25.print_last_word(words)</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">secret_formula</span><span class="params">(started)</span></span></div><div class="line">  jelly_beans = started * <span class="number">500</span></div><div class="line">  jars = jelly_beans / <span class="number">1000</span></div><div class="line">  crates = jars / <span class="number">100</span></div><div class="line">  <span class="keyword">return</span> jelly_beans, jars, crates</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">puts <span class="string">"Let's practice everything."</span></div><div class="line">puts <span class="string">'You\'d need to know \'bout escapes with \\ that do \n newlines and \t tabs.'</span></div><div class="line"></div><div class="line">poem = &lt;&lt;<span class="keyword">END</span></div><div class="line">\tThe lovely world</div><div class="line">with logic so firmly planted</div><div class="line">cannot discern \n the needs of love</div><div class="line">nor comprehend passion from intuition</div><div class="line"><span class="keyword">and</span> requires an explanation</div><div class="line">\n\t\twhere there is none.</div><div class="line"><span class="keyword">END</span></div><div class="line"></div><div class="line">puts <span class="string">"--------------"</span></div><div class="line">puts poem</div><div class="line">puts <span class="string">"--------------"</span></div><div class="line"></div><div class="line"></div><div class="line">five = <span class="number">10</span> - <span class="number">2</span> + <span class="number">3</span> - <span class="number">6</span></div><div class="line">puts <span class="string">"This should be five: <span class="subst">#&#123;five&#125;</span>"</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">start_point = <span class="number">10000</span></div><div class="line">beans, jars, crates = secret_formula(start_point)</div><div class="line"></div><div class="line">puts <span class="string">"With a starting point of: <span class="subst">#&#123;start_point&#125;</span>"</span></div><div class="line">puts <span class="string">"We'd have <span class="subst">#&#123;beans&#125;</span> beans, <span class="subst">#&#123;jars&#125;</span> jars, and <span class="subst">#&#123;crates&#125;</span> crates."</span></div><div class="line"></div><div class="line">start_point = start_point / <span class="number">10</span></div><div class="line"></div><div class="line">sentence = <span class="string">"All good things come to those who wait."</span></div><div class="line">words = Ex25.break_words(sentence)</div><div class="line">sorted_words = Ex25.sort_words(words)</div><div class="line">Ex25.print_first_word(words)</div><div class="line">Ex25.print_last_word(words)</div><div class="line">Ex25.print_first_word(sorted_words)</div><div class="line">Ex25.print_last_word(sorted_words)</div><div class="line">sorted_words = Ex25.sort_sentence(sentence)</div><div class="line">Ex25.print_first_and_last(sentence)</div><div class="line">Ex25.print_first_and_last_sorted(sentence)</div></pre></td></tr></table></figure>
<p>运行结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex26.rb</div><div class="line">Let<span class="string">'s practice everything.</span></div><div class="line">You'd need to know <span class="string">'bout escapes with \ that do \n newlines and \t tabs.</span></div><div class="line">--------------</div><div class="line">	The lovely world</div><div class="line">with logic so firmly planted</div><div class="line">cannot discern</div><div class="line"> the needs of love</div><div class="line">nor comprehend passion from intuition</div><div class="line">and requires an explanation</div><div class="line"></div><div class="line">		where there is none.</div><div class="line">--------------</div><div class="line">This should be five: 5</div><div class="line">With a starting point of: 10000</div><div class="line">We'd have 5000000 beans, 5000 jars, and 50 crates.</div><div class="line">wait.</div><div class="line">who</div><div class="line">who</div><div class="line">wait.</div><div class="line">wait.</div><div class="line">who</div><div class="line">who</div><div class="line">wait.</div></pre></td></tr></table></figure>
<h2 id="习题-27-逻辑关系"><a href="#习题-27-逻辑关系" class="headerlink" title="习题 27 逻辑关系"></a>习题 27 逻辑关系</h2><p>这一部分比较基本，记得 <code>and</code>, <code>or</code>, <code>not</code> 即可。如果不熟悉的话，网上也有很多相关，或者在 <code>irb</code> 中把各种可能试验一下，这里就不赘述了。</p>
<h2 id="习题-28-布尔表达式"><a href="#习题-28-布尔表达式" class="headerlink" title="习题 28 布尔表达式"></a>习题 28 布尔表达式</h2><p>逻辑相关的基本练习，参见 <code>ex28.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="literal">true</span> <span class="keyword">and</span> <span class="literal">true</span></div><div class="line"><span class="literal">false</span> <span class="keyword">and</span> <span class="literal">true</span></div><div class="line"><span class="number">1</span> == <span class="number">1</span> <span class="keyword">and</span> <span class="number">2</span> == <span class="number">1</span></div><div class="line"><span class="string">"test"</span> == <span class="string">"test"</span></div><div class="line"><span class="number">1</span> == <span class="number">1</span> <span class="keyword">or</span> <span class="number">2</span> != <span class="number">1</span></div><div class="line"><span class="literal">true</span> <span class="keyword">and</span> <span class="number">1</span> == <span class="number">1</span></div><div class="line"><span class="literal">false</span> <span class="keyword">and</span> <span class="number">0</span> != <span class="number">0</span></div><div class="line"><span class="literal">true</span> <span class="keyword">or</span> <span class="number">1</span> == <span class="number">1</span></div><div class="line"><span class="string">"test"</span> == <span class="string">"testing"</span></div><div class="line"><span class="number">1</span> != <span class="number">0</span> <span class="keyword">and</span> <span class="number">2</span> == <span class="number">1</span></div><div class="line"><span class="string">"test"</span> != <span class="string">"testing"</span></div><div class="line"><span class="string">"test"</span> == <span class="number">1</span></div><div class="line"><span class="keyword">not</span> (<span class="literal">true</span> <span class="keyword">and</span> <span class="literal">false</span>)</div><div class="line"><span class="keyword">not</span> (<span class="number">1</span> == <span class="number">1</span> <span class="keyword">and</span> <span class="number">0</span> != <span class="number">1</span>)</div><div class="line"><span class="keyword">not</span> (<span class="number">10</span> == <span class="number">1</span> <span class="keyword">or</span> <span class="number">1000</span> == <span class="number">1000</span>)</div><div class="line"><span class="keyword">not</span> (<span class="number">1</span> != <span class="number">10</span> <span class="keyword">or</span> <span class="number">3</span> == <span class="number">4</span>)</div><div class="line"><span class="keyword">not</span> (<span class="string">"testing"</span> == <span class="string">"testing"</span> <span class="keyword">and</span> <span class="string">"Zed"</span> == <span class="string">"Cool Guy"</span>)</div><div class="line"><span class="number">1</span> == <span class="number">1</span> <span class="keyword">and</span> <span class="keyword">not</span> (<span class="string">"testing"</span> == <span class="number">1</span> <span class="keyword">or</span> <span class="number">1</span> == <span class="number">0</span>)</div><div class="line"><span class="string">"chunky"</span> == <span class="string">"bacon"</span> <span class="keyword">and</span> <span class="keyword">not</span> (<span class="number">3</span> == <span class="number">4</span> <span class="keyword">or</span> <span class="number">3</span> == <span class="number">3</span>)</div><div class="line"><span class="number">3</span> == <span class="number">3</span> <span class="keyword">and</span> <span class="keyword">not</span> (<span class="string">"testing"</span> == <span class="string">"testing"</span> <span class="keyword">or</span> <span class="string">"Ruby"</span> == <span class="string">"Fun"</span>)</div></pre></td></tr></table></figure>
<p>把这些输入到 <code>irb</code> 中查看结果即可</p>
<h2 id="习题-29-如果-IF"><a href="#习题-29-如果-IF" class="headerlink" title="习题 29 如果 IF"></a>习题 29 如果 IF</h2><p>If 语句是分支中最常用的部分，参考 <code>ex29.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">people = <span class="number">20</span></div><div class="line">cats = <span class="number">30</span></div><div class="line">dogs = <span class="number">15</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> people &lt; cats</div><div class="line">  puts <span class="string">"Too many cats! The world is doomed!"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> people &gt; cats</div><div class="line">  puts <span class="string">"Not many cats! The world is saved!"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> people &lt; dogs</div><div class="line">  puts <span class="string">"The world is drooled on!"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> people &gt; dogs</div><div class="line">  puts <span class="string">"The world is dry!"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">dogs += <span class="number">5</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> people &gt;= dogs</div><div class="line">  puts <span class="string">"People are greater than or equal to dogs."</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> people &lt;= dogs</div><div class="line">  puts <span class="string">"People are less than or equal to dogs."</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> people == dogs</div><div class="line">  puts <span class="string">"People are dogs."</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>注意由 <code>end</code> 结尾，结果为：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex29.rb</div><div class="line">Too many cats! The world is doomed!</div><div class="line">The world is dry!</div><div class="line">People are greater than or equal to dogs.</div><div class="line">People are less than or equal to dogs.</div><div class="line">People are dogs.</div></pre></td></tr></table></figure>
<h2 id="习题-30-Else-和-If"><a href="#习题-30-Else-和-If" class="headerlink" title="习题 30 Else 和 If"></a>习题 30 Else 和 If</h2><p>这一次我们继续来练习 If Else，具体参考 <code>ex30.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">people = <span class="number">30</span></div><div class="line">cars = <span class="number">40</span></div><div class="line">buses = <span class="number">15</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> cars &gt; people</div><div class="line">  puts <span class="string">"We should take the cars."</span></div><div class="line"><span class="keyword">elsif</span> cars &lt; people</div><div class="line">  puts <span class="string">"We should not take the cars."</span></div><div class="line"><span class="keyword">else</span></div><div class="line">  puts <span class="string">"We can't decide."</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> buses &gt; cars</div><div class="line">  puts <span class="string">"That's too many buses."</span></div><div class="line"><span class="keyword">elsif</span> buses &lt; cars</div><div class="line">  puts <span class="string">"Maybe we could take the buses."</span></div><div class="line"><span class="keyword">else</span></div><div class="line">  puts <span class="string">"We still can't decide."</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> people &gt; buses</div><div class="line">  puts <span class="string">"Alright, let's just take the buses."</span></div><div class="line"><span class="keyword">else</span></div><div class="line">  puts <span class="string">"Fine, let's stay home then."</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex30.rb</div><div class="line">We should take the cars.</div><div class="line">Maybe we could take the buses.</div><div class="line">Alright, <span class="built_in">let</span><span class="string">'s just take the buses.</span></div></pre></td></tr></table></figure>
<h2 id="习题-31-做出决定"><a href="#习题-31-做出决定" class="headerlink" title="习题 31 做出决定"></a>习题 31 做出决定</h2><p>我们可以结合 <code>if</code>, <code>elsif</code> 和 <code>else</code> 来完成更加复杂的逻辑，具体参考 <code>ex31.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">prompt</span></span></div><div class="line">  print <span class="string">"&gt; "</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">puts <span class="string">"You enter a dark room with two doors.  Do you go through door #1 or door #2?"</span></div><div class="line"></div><div class="line">prompt; door = gets.chomp</div><div class="line"></div><div class="line"><span class="keyword">if</span> door == <span class="string">"1"</span></div><div class="line">  puts <span class="string">"There's a giant bear here eating a cheese cake.  What do you do?"</span></div><div class="line">  puts <span class="string">"1. Take the cake."</span></div><div class="line">  puts <span class="string">"2. Scream at the bear."</span></div><div class="line"></div><div class="line">  prompt; bear = gets.chomp</div><div class="line"></div><div class="line">  <span class="keyword">if</span> bear == <span class="string">"1"</span></div><div class="line">    puts <span class="string">"The bear eats your face off.  Good job!"</span></div><div class="line">  <span class="keyword">elsif</span> bear == <span class="string">"2"</span></div><div class="line">    puts <span class="string">"The bear eats your legs off.  Good job!"</span></div><div class="line">  <span class="keyword">else</span></div><div class="line">    puts <span class="string">"Well, doing <span class="subst">#&#123;bear&#125;</span> is probably better.  Bear runs away."</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">elsif</span> door == <span class="string">"2"</span></div><div class="line">  puts <span class="string">"You stare into the endless abyss at Cthuhlu's retina."</span></div><div class="line">  puts <span class="string">"1. Blueberries."</span></div><div class="line">  puts <span class="string">"2. Yellow jacket clothespins."</span></div><div class="line">  puts <span class="string">"3. Understanding revolvers yelling melodies."</span></div><div class="line"></div><div class="line">  prompt; insanity = gets.chomp</div><div class="line"></div><div class="line">  <span class="keyword">if</span> insanity == <span class="string">"1"</span> <span class="keyword">or</span> insanity == <span class="string">"2"</span></div><div class="line">    puts <span class="string">"Your body survives powered by a mind of jello.  Good job!"</span></div><div class="line">  <span class="keyword">else</span></div><div class="line">    puts <span class="string">"The insanity rots your eyes into a pool of muck.  Good job!"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">else</span></div><div class="line">  puts <span class="string">"You stumble around and fall on a knife and die.  Good job!"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>可以自己尝试一下，其中一种可能是：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex31.rb</div><div class="line">You enter a dark room with two doors.  Do you go through door <span class="comment">#1 or door #2?</span></div><div class="line">&gt; 2</div><div class="line">You stare into the endless abyss at Cthuhlu<span class="string">'s retina.</span></div><div class="line">1. Blueberries.</div><div class="line">2. Yellow jacket clothespins.</div><div class="line">3. Understanding revolvers yelling melodies.</div><div class="line">&gt; 3</div><div class="line">The insanity rots your eyes into a pool of muck.  Good job!</div></pre></td></tr></table></figure>
<h2 id="习题-32-数组与循环"><a href="#习题-32-数组与循环" class="headerlink" title="习题 32 数组与循环"></a>习题 32 数组与循环</h2><p>数组和循环是程序设计中再常用不过的元素，我们这次就来看一看，具体见 <code>ex32.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">the_count = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line">fruits = [<span class="string">'apples'</span>, <span class="string">'oranges'</span>, <span class="string">'pears'</span>, <span class="string">'apricots'</span>]</div><div class="line">change = [<span class="number">1</span>, <span class="string">'pennies'</span>, <span class="number">2</span>, <span class="string">'dimes'</span>, <span class="number">3</span>, <span class="string">'quarters'</span>]</div><div class="line"></div><div class="line"><span class="comment"># this first kind of for-loop goes through an array</span></div><div class="line"><span class="keyword">for</span> number <span class="keyword">in</span> the_count</div><div class="line">  puts <span class="string">"This is count <span class="subst">#&#123;number&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment"># same as above, but using a block instead</span></div><div class="line">fruits.each <span class="keyword">do</span> <span class="params">|fruit|</span></div><div class="line">  puts <span class="string">"A fruit of type: <span class="subst">#&#123;fruit&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment"># also we can go through mixed arrays too</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> change</div><div class="line">  puts <span class="string">"I got <span class="subst">#&#123;i&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment"># we can also build arrays, first start with an empty one</span></div><div class="line">elements = []</div><div class="line"></div><div class="line"><span class="comment"># then use a range object to do 0 to 5 counts</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> (<span class="number">0</span>..<span class="number">5</span>)</div><div class="line">  puts <span class="string">"Adding <span class="subst">#&#123;i&#125;</span> to the list."</span></div><div class="line">  <span class="comment"># push is a function that arrays understand</span></div><div class="line">  elements.push(i)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment"># now we can puts them out too</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> elements</div><div class="line">  puts <span class="string">"Element was: <span class="subst">#&#123;i&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>注意不同的循环方式，结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex32.rb</div><div class="line">This is count 1</div><div class="line">This is count 2</div><div class="line">This is count 3</div><div class="line">This is count 4</div><div class="line">This is count 5</div><div class="line">A fruit of <span class="built_in">type</span>: apples</div><div class="line">A fruit of <span class="built_in">type</span>: oranges</div><div class="line">A fruit of <span class="built_in">type</span>: pears</div><div class="line">A fruit of <span class="built_in">type</span>: apricots</div><div class="line">I got 1</div><div class="line">I got pennies</div><div class="line">I got 2</div><div class="line">I got dimes</div><div class="line">I got 3</div><div class="line">I got quarters</div><div class="line">Adding 0 to the list.</div><div class="line">Adding 1 to the list.</div><div class="line">Adding 2 to the list.</div><div class="line">Adding 3 to the list.</div><div class="line">Adding 4 to the list.</div><div class="line">Adding 5 to the list.</div><div class="line">Element was: 0</div><div class="line">Element was: 1</div><div class="line">Element was: 2</div><div class="line">Element was: 3</div><div class="line">Element was: 4</div><div class="line">Element was: 5</div></pre></td></tr></table></figure>
<h2 id="习题-33-While-循环"><a href="#习题-33-While-循环" class="headerlink" title="习题 33 While 循环"></a>习题 33 While 循环</h2><p>同样是循环的一种方式，但是因为可能死循环，所以使用的时候一定要小心，参见 <code>ex33.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">i = <span class="number">0</span></div><div class="line">numbers = []</div><div class="line"></div><div class="line"><span class="keyword">while</span> i &lt; <span class="number">6</span></div><div class="line">  puts <span class="string">"At the top i is <span class="subst">#&#123;i&#125;</span>"</span></div><div class="line">  numbers.push(i)</div><div class="line"></div><div class="line">  i = i + <span class="number">1</span></div><div class="line">  puts <span class="string">"Numbers now: <span class="subst">#&#123;numbers&#125;</span>"</span></div><div class="line">  puts <span class="string">"At the bottom i is <span class="subst">#&#123;i&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">puts <span class="string">"The numbers: "</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> num <span class="keyword">in</span> numbers</div><div class="line">  puts num</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex33.rb</div><div class="line">At the top i is 0</div><div class="line">Numbers now: [0]</div><div class="line">At the bottom i is 1</div><div class="line">At the top i is 1</div><div class="line">Numbers now: [0, 1]</div><div class="line">At the bottom i is 2</div><div class="line">At the top i is 2</div><div class="line">Numbers now: [0, 1, 2]</div><div class="line">At the bottom i is 3</div><div class="line">At the top i is 3</div><div class="line">Numbers now: [0, 1, 2, 3]</div><div class="line">At the bottom i is 4</div><div class="line">At the top i is 4</div><div class="line">Numbers now: [0, 1, 2, 3, 4]</div><div class="line">At the bottom i is 5</div><div class="line">At the top i is 5</div><div class="line">Numbers now: [0, 1, 2, 3, 4, 5]</div><div class="line">At the bottom i is 6</div><div class="line">The numbers:</div><div class="line">0</div><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td></tr></table></figure>
<h2 id="习题-34-访问数组"><a href="#习题-34-访问数组" class="headerlink" title="习题 34 访问数组"></a>习题 34 访问数组</h2><p>下面直接用代码展示数组的常见操作，见 <code>ex34.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">animals = [<span class="string">'bear'</span>, <span class="string">'python'</span>, <span class="string">'peacock'</span>, <span class="string">'kangaroo'</span>, <span class="string">'whale'</span>, <span class="string">'platypus'</span>]</div><div class="line"></div><div class="line">puts animals.first</div><div class="line">puts animals.last</div><div class="line">puts <span class="string">"size: %d"</span> % animals.size</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> (<span class="number">0</span>..animals.size-<span class="number">1</span>)</div><div class="line">    puts <span class="string">"The &#123;%d&#125; is %s"</span> % [i, animals[i]]</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex34.rb</div><div class="line">bear</div><div class="line">platypus</div><div class="line">size: 6</div><div class="line">The &#123;0&#125; is bear</div><div class="line">The &#123;1&#125; is python</div><div class="line">The &#123;2&#125; is peacock</div><div class="line">The &#123;3&#125; is kangaroo</div><div class="line">The &#123;4&#125; is whale</div><div class="line">The &#123;5&#125; is platypus</div></pre></td></tr></table></figure>
<h2 id="习题-35-函数和分支"><a href="#习题-35-函数和分支" class="headerlink" title="习题 35 函数和分支"></a>习题 35 函数和分支</h2><p>我们用函数和分支改写前面的游戏，参见 <code>ex35.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">prompt</span><span class="params">()</span></span></div><div class="line">  print <span class="string">"&gt; "</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">gold_room</span><span class="params">()</span></span></div><div class="line">  puts <span class="string">"This room is full of gold.  How much do you take?"</span></div><div class="line"></div><div class="line">  prompt; next_move = gets.chomp</div><div class="line">  <span class="keyword">if</span> next_move.<span class="keyword">include</span>? <span class="string">"0"</span> <span class="keyword">or</span> next_move.<span class="keyword">include</span>? <span class="string">"1"</span></div><div class="line">    how_much = next_move.to_i()</div><div class="line">  <span class="keyword">else</span></div><div class="line">    dead(<span class="string">"Man, learn to type a number."</span>)</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="keyword">if</span> how_much &lt; <span class="number">50</span></div><div class="line">    puts <span class="string">"Nice, you're not greedy, you win!"</span></div><div class="line">    Process.exit(<span class="number">0</span>)</div><div class="line">  <span class="keyword">else</span></div><div class="line">    dead(<span class="string">"You greedy bastard!"</span>)</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">bear_room</span><span class="params">()</span></span></div><div class="line">  puts <span class="string">"There is a bear here."</span></div><div class="line">  puts <span class="string">"The bear has a bunch of honey."</span></div><div class="line">  puts <span class="string">"The fat bear is in front of another door."</span></div><div class="line">  puts <span class="string">"How are you going to move the bear?"</span></div><div class="line">  bear_moved = <span class="literal">false</span></div><div class="line"></div><div class="line">  <span class="keyword">while</span> <span class="literal">true</span></div><div class="line">    prompt; next_move = gets.chomp</div><div class="line"></div><div class="line">    <span class="keyword">if</span> next_move == <span class="string">"take honey"</span></div><div class="line">      dead(<span class="string">"The bear looks at you then slaps your face off."</span>)</div><div class="line">    <span class="keyword">elsif</span> next_move == <span class="string">"taunt bear"</span> <span class="keyword">and</span> <span class="keyword">not</span> bear_moved</div><div class="line">      puts <span class="string">"The bear has moved from the door. You can go through it now."</span></div><div class="line">      bear_moved = <span class="literal">true</span></div><div class="line">    <span class="keyword">elsif</span> next_move == <span class="string">"taunt bear"</span> <span class="keyword">and</span> bear_moved</div><div class="line">      dead(<span class="string">"The bear gets pissed off and chews your leg off."</span>)</div><div class="line">    <span class="keyword">elsif</span> next_move == <span class="string">"open door"</span> <span class="keyword">and</span> bear_moved</div><div class="line">      gold_room()</div><div class="line">    <span class="keyword">else</span></div><div class="line">      puts <span class="string">"I got no idea what that means."</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">cthulu_room</span><span class="params">()</span></span></div><div class="line">  puts <span class="string">"Here you see the great evil Cthulu."</span></div><div class="line">  puts <span class="string">"He, it, whatever stares at you and you go insane."</span></div><div class="line">  puts <span class="string">"Do you flee for your life or eat your head?"</span></div><div class="line"></div><div class="line">  prompt; next_move = gets.chomp</div><div class="line"></div><div class="line">  <span class="keyword">if</span> next_move.<span class="keyword">include</span>? <span class="string">"flee"</span></div><div class="line">    start()</div><div class="line">  <span class="keyword">elsif</span> next_move.<span class="keyword">include</span>? <span class="string">"head"</span></div><div class="line">    dead(<span class="string">"Well that was tasty!"</span>)</div><div class="line">  <span class="keyword">else</span></div><div class="line">    cthulu_room()</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">dead</span><span class="params">(why)</span></span></div><div class="line">  puts <span class="string">"<span class="subst">#&#123;why&#125;</span>  Good job!"</span></div><div class="line">  Process.exit(<span class="number">0</span>)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">start</span><span class="params">()</span></span></div><div class="line">  puts <span class="string">"You are in a dark room."</span></div><div class="line">  puts <span class="string">"There is a door to your right and left."</span></div><div class="line">  puts <span class="string">"Which one do you take?"</span></div><div class="line"></div><div class="line">  prompt; next_move = gets.chomp</div><div class="line"></div><div class="line">  <span class="keyword">if</span> next_move == <span class="string">"left"</span></div><div class="line">    bear_room()</div><div class="line">  <span class="keyword">elsif</span> next_move == <span class="string">"right"</span></div><div class="line">    cthulu_room()</div><div class="line">  <span class="keyword">else</span></div><div class="line">    dead(<span class="string">"You stumble around the room until you starve."</span>)</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">start()</div></pre></td></tr></table></figure>
<p>一个可能的结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex35.rb</div><div class="line">You are <span class="keyword">in</span> a dark room.</div><div class="line">There is a door to your right and left.</div><div class="line">Which one <span class="keyword">do</span> you take?</div><div class="line">&gt; left</div><div class="line">There is a bear here.</div><div class="line">The bear has a bunch of honey.</div><div class="line">The fat bear is <span class="keyword">in</span> front of another door.</div><div class="line">How are you going to move the bear?</div><div class="line">&gt; door</div><div class="line">I got no idea what that means.</div><div class="line">&gt; honey</div><div class="line">I got no idea what that means.</div><div class="line">&gt; open door</div><div class="line">I got no idea what that means.</div><div class="line">&gt; taunt bear</div><div class="line">The bear has moved from the door. You can go through it now.</div><div class="line">&gt; open door</div><div class="line">This room is full of gold.  How much <span class="keyword">do</span> you take?</div><div class="line">&gt; 233</div><div class="line">Man, learn to <span class="built_in">type</span> a number.  Good job!</div></pre></td></tr></table></figure>
<h2 id="习题-36-设计和测试"><a href="#习题-36-设计和测试" class="headerlink" title="习题 36 设计和测试"></a>习题 36 设计和测试</h2><p>简单来说是从小的做起，然后利用 <code>puts</code> 检查值是否正确，当然这并不是最好的设计和测试方案，不过到目前为止，这样是足够的</p>
<h2 id="习题-37-各种符号"><a href="#习题-37-各种符号" class="headerlink" title="习题 37 各种符号"></a>习题 37 各种符号</h2><p>这一次我们来了解 Ruby 中的各种符号，具体如下：</p>
<p>Keywords</p>
<ul>
<li>alias</li>
<li>and</li>
<li>BEGIN</li>
<li>begin</li>
<li>break</li>
<li>case</li>
<li>class</li>
<li>def</li>
<li>defined?</li>
<li>do</li>
<li>else</li>
<li>elsif</li>
<li>END</li>
<li>end</li>
<li>ensure</li>
<li>false</li>
<li>for</li>
<li>if</li>
<li>in</li>
<li>module</li>
<li>next</li>
<li>nil</li>
<li>not</li>
<li>or</li>
<li>redo</li>
<li>rescue</li>
<li>retry</li>
<li>return</li>
<li>self</li>
<li>super</li>
<li>then</li>
<li>true</li>
<li>undef</li>
<li>unless</li>
<li>until</li>
<li>when</li>
<li>while</li>
<li>yield</li>
</ul>
<p>数据类型</p>
<ul>
<li>true</li>
<li>false</li>
<li>nil</li>
<li>constants</li>
<li>strings</li>
<li>numbers</li>
<li>ranges</li>
<li>arrays</li>
<li>hashes</li>
</ul>
<p>字符串格式</p>
<ul>
<li><code>\\</code></li>
<li><code>\&#39;</code></li>
<li><code>\&quot;</code></li>
<li><code>\a</code></li>
<li><code>\b</code></li>
<li><code>\f</code></li>
<li><code>\n</code></li>
<li><code>\r</code></li>
<li><code>\t</code></li>
<li><code>\v</code></li>
</ul>
<p>操作符</p>
<ul>
<li><code>::</code></li>
<li><code>[]</code></li>
<li><code>**</code></li>
<li><code>-(unary)</code></li>
<li><code>+(unary)</code></li>
<li><code>!</code></li>
<li><code>~</code></li>
<li><code>*</code></li>
<li><code>/</code></li>
<li><code>%</code></li>
<li><code>+</code></li>
<li><code>-</code></li>
<li><code>&lt;&lt;</code></li>
<li><code>&gt;&gt;</code></li>
<li><code>&amp;</code></li>
<li><code>|</code></li>
<li><code>&gt;</code></li>
<li><code>&gt;=</code></li>
<li><code>&lt;</code></li>
<li><code>&lt;=</code></li>
<li><code>&lt;=&gt;</code></li>
<li><code>==</code></li>
<li><code>===</code></li>
<li><code>!=</code></li>
<li><code>=~</code></li>
<li><code>!~</code></li>
<li><code>&amp;&amp;</code></li>
<li><code>||</code></li>
<li><code>..</code></li>
<li><code>...</code></li>
</ul>
<h2 id="习题-38-再阅读代码"><a href="#习题-38-再阅读代码" class="headerlink" title="习题 38 再阅读代码"></a>习题 38 再阅读代码</h2><p>阅读的时候注意以下内容</p>
<ol>
<li>函数及其功能</li>
<li>变量的初始值</li>
<li>不同的控制流程</li>
<li>不同的循环</li>
<li>记下来不懂的地方</li>
</ol>
<h2 id="习题-39-操作数组"><a href="#习题-39-操作数组" class="headerlink" title="习题 39 操作数组"></a>习题 39 操作数组</h2><p>数组是一个对象，拥有的方法可以令其当做不同的数据结构使用，参见 <code>ex39.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">ten_things = <span class="string">"Apples Oranges Crows Telephone Light Sugar"</span></div><div class="line"></div><div class="line">puts <span class="string">"Wait there's not 10 things in that list, let's fix that."</span></div><div class="line"></div><div class="line">stuff = ten_things.split(<span class="string">' '</span>)</div><div class="line">more_stuff = <span class="string">%w(Day Night Song Frisbee Corn Banana Girl Boy)</span></div><div class="line"></div><div class="line"><span class="keyword">while</span> stuff.length != <span class="number">10</span></div><div class="line">  next_one = more_stuff.pop()</div><div class="line">  puts <span class="string">"Adding: <span class="subst">#&#123;next_one&#125;</span>"</span></div><div class="line">  stuff.push(next_one)</div><div class="line">  puts <span class="string">"There's <span class="subst">#&#123;stuff.length&#125;</span> items now."</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">puts <span class="string">"There we go: <span class="subst">#&#123;stuff&#125;</span>"</span></div><div class="line"></div><div class="line">puts <span class="string">"Let's do some things with stuff."</span></div><div class="line"></div><div class="line">puts stuff[<span class="number">1</span>]</div><div class="line">puts stuff[-<span class="number">1</span>] <span class="comment"># whoa! fancy</span></div><div class="line">puts stuff.pop()</div><div class="line">puts stuff.join(<span class="string">' '</span>) <span class="comment"># what? cool!</span></div><div class="line">puts stuff.values_at(<span class="number">3</span>,<span class="number">5</span>).join(<span class="string">'#'</span>) <span class="comment"># super stellar!</span></div></pre></td></tr></table></figure>
<p>结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex39.rb</div><div class="line">Wait there<span class="string">'s not 10 things in that list, let'</span>s fix that.</div><div class="line">Adding: Boy</div><div class="line">There<span class="string">'s 7 items now.</span></div><div class="line">Adding: Girl</div><div class="line">There's 8 items now.</div><div class="line">Adding: Banana</div><div class="line">There<span class="string">'s 9 items now.</span></div><div class="line">Adding: Corn</div><div class="line">There's 10 items now.</div><div class="line">There we go: [<span class="string">"Apples"</span>, <span class="string">"Oranges"</span>, <span class="string">"Crows"</span>, <span class="string">"Telephone"</span>, <span class="string">"Light"</span>, <span class="string">"Sugar"</span>, <span class="string">"Boy"</span>, <span class="string">"Girl"</span>, <span class="string">"Banana"</span>, <span class="string">"Corn"</span>]</div><div class="line">Let<span class="string">'s do some things with stuff.</span></div><div class="line">Oranges</div><div class="line">Corn</div><div class="line">Corn</div><div class="line">Apples Oranges Crows Telephone Light Sugar Boy Girl Banana</div><div class="line">Telephone#Sugar</div></pre></td></tr></table></figure>
<h2 id="习题-40-哈希"><a href="#习题-40-哈希" class="headerlink" title="习题 40 哈希"></a>习题 40 哈希</h2><p>其实就是要学会用字典，注意后面代码中自定函数的部分，参加 <code>ex40.rb</code></p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line">cities = &#123;<span class="string">'CA'</span> =&gt; <span class="string">'San Francisco'</span>,</div><div class="line">  <span class="string">'MI'</span> =&gt; <span class="string">'Detroit'</span>,</div><div class="line">  <span class="string">'FL'</span> =&gt; <span class="string">'Jacksonville'</span>&#125;</div><div class="line"></div><div class="line">cities[<span class="string">'NY'</span>] = <span class="string">'New York'</span></div><div class="line">cities[<span class="string">'OR'</span>] = <span class="string">'Portland'</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_city</span><span class="params">(map, state)</span></span></div><div class="line">  <span class="keyword">if</span> map.<span class="keyword">include</span>? state</div><div class="line">    <span class="keyword">return</span> map[state]</div><div class="line">  <span class="keyword">else</span></div><div class="line">    <span class="keyword">return</span> <span class="string">"Not found."</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment"># ok pay attention!</span></div><div class="line">cities[<span class="symbol">:find</span>] = method(<span class="symbol">:find_city</span>)</div><div class="line"></div><div class="line"><span class="keyword">while</span> <span class="literal">true</span></div><div class="line">  print <span class="string">"State? (ENTER to quit) "</span></div><div class="line">  state = gets.chomp</div><div class="line"></div><div class="line">  <span class="keyword">break</span> <span class="keyword">if</span> state.empty?</div><div class="line"></div><div class="line">  <span class="comment"># this line is the most important ever! study!</span></div><div class="line">  puts cities[<span class="symbol">:find</span>].call(cities, state)</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>结果为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex40.rb</div><div class="line">State? (ENTER to quit) NY</div><div class="line">New York</div><div class="line">State? (ENTER to quit)</div></pre></td></tr></table></figure>
<h2 id="习题-41-来自-Percal-25-星球的哥顿人-Gothons"><a href="#习题-41-来自-Percal-25-星球的哥顿人-Gothons" class="headerlink" title="习题 41 来自 Percal 25 星球的哥顿人(Gothons)"></a>习题 41 来自 Percal 25 星球的哥顿人(Gothons)</h2><p>这一节更加复杂了，注意这里传递的都是函数，不明白的话要理解清楚，参见 <code>ex41.rb</code></p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">prompt</span><span class="params">()</span></span></div><div class="line">  print <span class="string">"&gt; "</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">death</span><span class="params">()</span></span></div><div class="line">  quips = [<span class="string">"You died.  You kinda suck at this."</span>,</div><div class="line">    <span class="string">"Nice job, you died ...jackass."</span>,</div><div class="line">    <span class="string">"Such a luser."</span>,</div><div class="line">    <span class="string">"I have a small puppy that's better at this."</span>]</div><div class="line">  puts quips[rand(quips.length())]</div><div class="line">  Process.exit(<span class="number">1</span>)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">central_corridor</span><span class="params">()</span></span></div><div class="line">  puts <span class="string">"The Gothons of Planet Percal #25 have invaded your ship and destroyed"</span></div><div class="line">  puts <span class="string">"your entire crew.  You are the last surviving member and your last"</span></div><div class="line">  puts <span class="string">"mission is to get the neutron destruct bomb from the Weapons Armory,"</span></div><div class="line">  puts <span class="string">"put it in the bridge, and blow the ship up after getting into an "</span></div><div class="line">  puts <span class="string">"escape pod."</span></div><div class="line">  puts <span class="string">"\n"</span></div><div class="line">  puts <span class="string">"You're running down the central corridor to the Weapons Armory when"</span></div><div class="line">  puts <span class="string">"a Gothon jumps out, red scaly skin, dark grimy teeth, and evil clown costume"</span></div><div class="line">  puts <span class="string">"flowing around his hate filled body.  He's blocking the door to the"</span></div><div class="line">  puts <span class="string">"Armory and about to pull a weapon to blast you."</span></div><div class="line"></div><div class="line">  prompt()</div><div class="line">  action = gets.chomp()</div><div class="line"></div><div class="line">  <span class="keyword">if</span> action == <span class="string">"shoot!"</span></div><div class="line">    puts <span class="string">"Quick on the draw you yank out your blaster and fire it at the Gothon."</span></div><div class="line">    puts <span class="string">"His clown costume is flowing and moving around his body, which throws"</span></div><div class="line">    puts <span class="string">"off your aim.  Your laser hits his costume but misses him entirely.  This"</span></div><div class="line">    puts <span class="string">"completely ruins his brand new costume his mother bought him, which"</span></div><div class="line">    puts <span class="string">"makes him fly into an insane rage and blast you repeatedly in the face until"</span></div><div class="line">    puts <span class="string">"you are dead.  Then he eats you."</span></div><div class="line">    <span class="keyword">return</span> <span class="symbol">:death</span></div><div class="line"></div><div class="line">  <span class="keyword">elsif</span> action == <span class="string">"dodge!"</span></div><div class="line">    puts <span class="string">"Like a world class boxer you dodge, weave, slip and slide right"</span></div><div class="line">    puts <span class="string">"as the Gothon's blaster cranks a laser past your head."</span></div><div class="line">    puts <span class="string">"In the middle of your artful dodge your foot slips and you"</span></div><div class="line">    puts <span class="string">"bang your head on the metal wall and pass out."</span></div><div class="line">    puts <span class="string">"You wake up shortly after only to die as the Gothon stomps on"</span></div><div class="line">    puts <span class="string">"your head and eats you."</span></div><div class="line">    <span class="keyword">return</span> <span class="symbol">:death</span></div><div class="line"></div><div class="line">  <span class="keyword">elsif</span> action == <span class="string">"tell a joke"</span></div><div class="line">    puts <span class="string">"Lucky for you they made you learn Gothon insults in the academy."</span></div><div class="line">    puts <span class="string">"You tell the one Gothon joke you know:"</span></div><div class="line">    puts <span class="string">"Lbhe zbgure vf fb sng, jura fur fvgf nebhaq gur ubhfr, fur fvgf nebhaq gur ubhfr."</span></div><div class="line">    puts <span class="string">"The Gothon stops, tries not to laugh, then busts out laughing and can't move."</span></div><div class="line">    puts <span class="string">"While he's laughing you run up and shoot him square in the head"</span></div><div class="line">    puts <span class="string">"putting him down, then jump through the Weapon Armory door."</span></div><div class="line">    <span class="keyword">return</span> <span class="symbol">:laser_weapon_armory</span></div><div class="line"></div><div class="line">  <span class="keyword">else</span></div><div class="line">    puts <span class="string">"DOES NOT COMPUTE!"</span></div><div class="line">    <span class="keyword">return</span> <span class="symbol">:central_corridor</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">laser_weapon_armory</span><span class="params">()</span></span></div><div class="line">  puts <span class="string">"You do a dive roll into the Weapon Armory, crouch and scan the room"</span></div><div class="line">  puts <span class="string">"for more Gothons that might be hiding.  It's dead quiet, too quiet."</span></div><div class="line">  puts <span class="string">"You stand up and run to the far side of the room and find the"</span></div><div class="line">  puts <span class="string">"neutron bomb in its container.  There's a keypad lock on the box"</span></div><div class="line">  puts <span class="string">"and you need the code to get the bomb out.  If you get the code"</span></div><div class="line">  puts <span class="string">"wrong 10 times then the lock closes forever and you can't"</span></div><div class="line">  puts <span class="string">"get the bomb.  The code is 3 digits."</span></div><div class="line">  code = <span class="string">"%s%s%s"</span> % [rand(<span class="number">9</span>)+<span class="number">1</span>, rand(<span class="number">9</span>)+<span class="number">1</span>, rand(<span class="number">9</span>)+<span class="number">1</span>]</div><div class="line">  print <span class="string">"[keypad]&gt; "</span></div><div class="line">  guess = gets.chomp()</div><div class="line">  guesses = <span class="number">0</span></div><div class="line"></div><div class="line">  <span class="keyword">while</span> guess != code <span class="keyword">and</span> guesses &lt; <span class="number">10</span></div><div class="line">    puts <span class="string">"BZZZZEDDD!"</span></div><div class="line">    guesses += <span class="number">1</span></div><div class="line">    print <span class="string">"[keypad]&gt; "</span></div><div class="line">    guess = gets.chomp()</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="keyword">if</span> guess == code</div><div class="line">    puts <span class="string">"The container clicks open and the seal breaks, letting gas out."</span></div><div class="line">    puts <span class="string">"You grab the neutron bomb and run as fast as you can to the"</span></div><div class="line">    puts <span class="string">"bridge where you must place it in the right spot."</span></div><div class="line">    <span class="keyword">return</span> <span class="symbol">:the_bridge</span></div><div class="line">  <span class="keyword">else</span></div><div class="line">    puts <span class="string">"The lock buzzes one last time and then you hear a sickening"</span></div><div class="line">    puts <span class="string">"melting sound as the mechanism is fused together."</span></div><div class="line">    puts <span class="string">"You decide to sit there, and finally the Gothons blow up the"</span></div><div class="line">    puts <span class="string">"ship from their ship and you die."</span></div><div class="line">    <span class="keyword">return</span> <span class="symbol">:death</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">the_bridge</span><span class="params">()</span></span></div><div class="line">  puts <span class="string">"You burst onto the Bridge with the netron destruct bomb"</span></div><div class="line">  puts <span class="string">"under your arm and surprise 5 Gothons who are trying to"</span></div><div class="line">  puts <span class="string">"take control of the ship.  Each of them has an even uglier"</span></div><div class="line">  puts <span class="string">"clown costume than the last.  They haven't pulled their"</span></div><div class="line">  puts <span class="string">"weapons out yet, as they see the active bomb under your"</span></div><div class="line">  puts <span class="string">"arm and don't want to set it off."</span></div><div class="line"></div><div class="line">  prompt()</div><div class="line">  action = gets.chomp()</div><div class="line"></div><div class="line">  <span class="keyword">if</span> action == <span class="string">"throw the bomb"</span></div><div class="line">    puts <span class="string">"In a panic you throw the bomb at the group of Gothons"</span></div><div class="line">    puts <span class="string">"and make a leap for the door.  Right as you drop it a"</span></div><div class="line">    puts <span class="string">"Gothon shoots you right in the back killing you."</span></div><div class="line">    puts <span class="string">"As you die you see another Gothon frantically try to disarm"</span></div><div class="line">    puts <span class="string">"the bomb. You die knowing they will probably blow up when"</span></div><div class="line">    puts <span class="string">"it goes off."</span></div><div class="line">    <span class="keyword">return</span> <span class="symbol">:death</span></div><div class="line"></div><div class="line">  <span class="keyword">elsif</span> action == <span class="string">"slowly place the bomb"</span></div><div class="line">    puts <span class="string">"You point your blaster at the bomb under your arm"</span></div><div class="line">    puts <span class="string">"and the Gothons put their hands up and start to sweat."</span></div><div class="line">    puts <span class="string">"You inch backward to the door, open it, and then carefully"</span></div><div class="line">    puts <span class="string">"place the bomb on the floor, pointing your blaster at it."</span></div><div class="line">    puts <span class="string">"You then jump back through the door, punch the close button"</span></div><div class="line">    puts <span class="string">"and blast the lock so the Gothons can't get out."</span></div><div class="line">    puts <span class="string">"Now that the bomb is placed you run to the escape pod to"</span></div><div class="line">    puts <span class="string">"get off this tin can."</span></div><div class="line">    <span class="keyword">return</span> <span class="symbol">:escape_pod</span></div><div class="line">  <span class="keyword">else</span></div><div class="line">    puts <span class="string">"DOES NOT COMPUTE!"</span></div><div class="line">    <span class="keyword">return</span> <span class="symbol">:the_bridge</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">escape_pod</span><span class="params">()</span></span></div><div class="line">  puts <span class="string">"You rush through the ship desperately trying to make it to"</span></div><div class="line">  puts <span class="string">"the escape pod before the whole ship explodes.  It seems like"</span></div><div class="line">  puts <span class="string">"hardly any Gothons are on the ship, so your run is clear of"</span></div><div class="line">  puts <span class="string">"interference.  You get to the chamber with the escape pods, and"</span></div><div class="line">  puts <span class="string">"now need to pick one to take.  Some of them could be damaged"</span></div><div class="line">  puts <span class="string">"but you don't have time to look.  There's 5 pods, which one"</span></div><div class="line">  puts <span class="string">"do you take?"</span></div><div class="line"></div><div class="line">  good_pod = rand(<span class="number">5</span>)+<span class="number">1</span></div><div class="line">  print <span class="string">"[pod #]&gt;"</span></div><div class="line">  guess = gets.chomp()</div><div class="line"></div><div class="line">  <span class="keyword">if</span> guess.to_i != good_pod</div><div class="line">    puts <span class="string">"You jump into pod %s and hit the eject button."</span> % guess</div><div class="line">    puts <span class="string">"The pod escapes out into the void of space, then"</span></div><div class="line">    puts <span class="string">"implodes as the hull ruptures, crushing your body"</span></div><div class="line">    puts <span class="string">"into jam jelly."</span></div><div class="line">    <span class="keyword">return</span> <span class="symbol">:death</span></div><div class="line">  <span class="keyword">else</span></div><div class="line">    puts <span class="string">"You jump into pod %s and hit the eject button."</span> % guess</div><div class="line">    puts <span class="string">"The pod easily slides out into space heading to"</span></div><div class="line">    puts <span class="string">"the planet below.  As it flies to the planet, you look"</span></div><div class="line">    puts <span class="string">"back and see your ship implode then explode like a"</span></div><div class="line">    puts <span class="string">"bright star, taking out the Gothon ship at the same"</span></div><div class="line">    puts <span class="string">"time.  You won!"</span></div><div class="line">    Process.exit(<span class="number">0</span>)</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">ROOMS = &#123;</div><div class="line">  <span class="symbol">:death</span> =&gt; method(<span class="symbol">:death</span>),</div><div class="line">  <span class="symbol">:central_corridor</span> =&gt; method(<span class="symbol">:central_corridor</span>),</div><div class="line">  <span class="symbol">:laser_weapon_armory</span> =&gt; method(<span class="symbol">:laser_weapon_armory</span>),</div><div class="line">  <span class="symbol">:the_bridge</span> =&gt; method(<span class="symbol">:the_bridge</span>),</div><div class="line">  <span class="symbol">:escape_pod</span> =&gt; method(<span class="symbol">:escape_pod</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">runner</span><span class="params">(map, start)</span></span></div><div class="line">  next_one = start</div><div class="line"></div><div class="line">  <span class="keyword">while</span> <span class="literal">true</span></div><div class="line">    room = map[next_one]</div><div class="line">    puts <span class="string">"\n--------"</span></div><div class="line">    next_one = room.call()</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">runner(ROOMS, <span class="symbol">:central_corridor</span>)</div></pre></td></tr></table></figure>
<p>运行代码也是一样长，这里就不贴了。</p>
<h2 id="习题-42-类"><a href="#习题-42-类" class="headerlink" title="习题 42 类"></a>习题 42 类</h2><p>像上面那样访问函数，其实也有更加方便和规范的方法，就是类，具体参见 <code>ex42.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TheThing</span></span></div><div class="line">  <span class="keyword">attr_reader</span> <span class="symbol">:number</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">()</span></span></div><div class="line">    @number = <span class="number">0</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">some_function</span><span class="params">()</span></span></div><div class="line">    puts <span class="string">"I got called."</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">add_me_up</span><span class="params">(more)</span></span></div><div class="line">    @number += more</div><div class="line">    <span class="keyword">return</span> @number</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment"># two different things</span></div><div class="line">a = TheThing.new</div><div class="line">b = TheThing.new</div><div class="line"></div><div class="line">a.some_function()</div><div class="line">b.some_function()</div><div class="line"></div><div class="line">puts a.add_me_up(<span class="number">20</span>)</div><div class="line">puts a.add_me_up(<span class="number">20</span>)</div><div class="line">puts b.add_me_up(<span class="number">30</span>)</div><div class="line">puts b.add_me_up(<span class="number">30</span>)</div><div class="line"></div><div class="line">puts a.number</div><div class="line">puts b.number</div></pre></td></tr></table></figure>
<p>注意类中的各个方法和变量声明，因为本文重点在于实例，具体的理论就暂且略过，后面会细致说明，结果为：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby ex42.rb</div><div class="line">I got called.</div><div class="line">I got called.</div><div class="line">20</div><div class="line">40</div><div class="line">30</div><div class="line">60</div><div class="line">40</div><div class="line">60</div></pre></td></tr></table></figure>
<h2 id="习题-43-44-制作与评估游戏"><a href="#习题-43-44-制作与评估游戏" class="headerlink" title="习题 43 44 制作与评估游戏"></a>习题 43 44 制作与评估游戏</h2><p>时间所限，就不制作游戏了，这里列出一些需要注意的地方：</p>
<ul>
<li>类中使用驼峰命名法</li>
<li>初始化函数中不应该做太多事情</li>
<li>非类中的函数使用下划线命名法</li>
<li>用一致的参数顺序组织参数</li>
<li>不要覆盖全局变量和模块变量</li>
<li>好的代码本身就是注释</li>
<li>当然注释本身也是很重要的</li>
</ul>
<h2 id="习题-45-类的关系"><a href="#习题-45-类的关系" class="headerlink" title="习题 45 类的关系"></a>习题 45 类的关系</h2><p>主要说的是继承，看代码 <code>ex45.rb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="comment">## Animal is-a object (yes, sort of confusing) look at the extra credit</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> &lt; Animal</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(name)</span></span></div><div class="line">    @name = name</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> &lt; Animal</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(name)</span></span></div><div class="line">    @name = name</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></div><div class="line">  <span class="keyword">attr_accessor</span> <span class="symbol">:pet</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(name)</span></span></div><div class="line">    @name = name</div><div class="line"></div><div class="line">    <span class="comment">## Person has-a pet of some kind</span></div><div class="line">    @pet = <span class="literal">nil</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> &lt; Person</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(name, salary)</span></span></div><div class="line">    <span class="comment">## ?? hmm what is this strange magic?</span></div><div class="line">    <span class="keyword">super</span>(name)</div><div class="line">    @salary = salary</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fish</span></span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Salmon</span> &lt; Fish</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Halibut</span> &lt; Fish</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment">## rover is-a Dog</span></div><div class="line">rover = Dog.new(<span class="string">"Rover"</span>)</div><div class="line"></div><div class="line">satan = Cat.new(<span class="string">"Satan"</span>)</div><div class="line"></div><div class="line">mary = Person.new(<span class="string">"Mary"</span>)</div><div class="line">mary.pet = satan</div><div class="line"></div><div class="line">frank = Employee.new(<span class="string">"Frank"</span>, <span class="number">120000</span>)</div><div class="line">frank.pet = rover</div><div class="line">flipper = Fish.new</div><div class="line">crouse = Salmon.new</div><div class="line">harry = Halibut.new</div></pre></td></tr></table></figure>
<p>这里需要注意的就是尽量避免多重继承。</p>
<h2 id="习题-46-项目结构"><a href="#习题-46-项目结构" class="headerlink" title="习题 46 项目结构"></a>习题 46 项目结构</h2><p>我们来看看如何来组织一个 Ruby 项目，先用下面的命令把需要的结构搭建起来</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">mkdir -p projects</div><div class="line"><span class="built_in">cd</span> projects/</div><div class="line">mkdir skeleton</div><div class="line"><span class="built_in">cd</span> skeleton</div><div class="line">mkdir bin lib lib/NAME <span class="built_in">test</span></div><div class="line"><span class="comment"># 配置文件</span></div><div class="line">touch lib/NAME.rb</div><div class="line">touch lib/NAME/version.rb</div></pre></td></tr></table></figure>
<p>然后我们在 skeleton 文件夹下新建一个 <code>NAME.gemspec</code>，内容如下</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="comment"># -*- encoding: utf-8 -*-</span></div><div class="line">$:.push File.expand_path(<span class="string">"../lib"</span>, __FILE_<span class="number">_</span>)</div><div class="line"><span class="keyword">require</span> <span class="string">"NAME/version"</span></div><div class="line"></div><div class="line">Gem::Specification.new <span class="keyword">do</span> <span class="params">|s|</span></div><div class="line">  s.name        = <span class="string">"NAME"</span></div><div class="line">  s.version     = NAME::VERSION</div><div class="line">  s.authors     = [<span class="string">"Da Wang"</span>]</div><div class="line">  s.email       = [<span class="string">"dawang@wdxtub"</span>]</div><div class="line">  s.homepage    = <span class="string">""</span></div><div class="line">  s.summary     = <span class="string">%q&#123;TODO: Write a gem summary&#125;</span></div><div class="line">  s.description = <span class="string">%q&#123;TODO: Write a gem description&#125;</span></div><div class="line"></div><div class="line">  s.rubyforge_project = <span class="string">"NAME"</span></div><div class="line"></div><div class="line">  s.files         = <span class="string">`git ls-files`</span>.split(<span class="string">"\n"</span>)</div><div class="line">  s.test_files    = <span class="string">`git ls-files -- &#123;test,spec,features&#125;/*`</span>.split(<span class="string">"\n"</span>)</div><div class="line">  s.executables   = <span class="string">`git ls-files -- bin/*`</span>.split(<span class="string">"\n"</span>).map&#123; <span class="params">|f|</span> File.basename(f) &#125;</div><div class="line">  s.require_paths = [<span class="string">"lib"</span>]</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>然后在 test 文件下新建一个 <code>test_NAME.rb</code> 文件，内容为</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'test/unit'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyUnitTests</span> &lt; Test::Unit::<span class="title">TestCase</span></span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">setup</span></span></div><div class="line">    puts <span class="string">"setup!"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">teardown</span></span></div><div class="line">    puts <span class="string">"teardown!"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">test_basic</span></span></div><div class="line">    puts <span class="string">"I RAN!"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>完成之后我们需要安装 gem，也就是 Ruby 的包管理器，具体可能需要的组件有：</p>
<ul>
<li><a href="http://git-scm.com/" target="_blank" rel="external">git</a></li>
<li><a href="http://rake.rubyforge.org/" target="_blank" rel="external">rake</a></li>
<li><a href="https://rvm.beginrescueend.com/" target="_blank" rel="external">rvm</a></li>
<li><a href="http://rubygems.org/pages/download" target="_blank" rel="external">rubygems</a></li>
<li><a href="http://gembundler.com/" target="_blank" rel="external">bundler</a></li>
</ul>
<p>相关的使用可以查看文档，这里不赘述。</p>
<h2 id="习题-47-自动化测试"><a href="#习题-47-自动化测试" class="headerlink" title="习题 47 自动化测试"></a>习题 47 自动化测试</h2><p>有了项目，就要有测试，我们来看看具体要怎么进行自动化测试。仿照之前的 skeleton，我们新建一个名为 <code>ex47</code> 的项目。然后我们在 <code>game.rb</code> 中添加如下内容：</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Room</span></span></div><div class="line"></div><div class="line">  <span class="keyword">attr_accessor</span> <span class="symbol">:name</span>, <span class="symbol">:description</span>, <span class="symbol">:paths</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(name, description)</span></span></div><div class="line">    @name = name</div><div class="line">    @description = description</div><div class="line">    @paths = &#123;&#125;</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">go</span><span class="params">(direction)</span></span></div><div class="line">    @paths[direction]</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">add_paths</span><span class="params">(paths)</span></span></div><div class="line">    @paths.update(paths)</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>编写单元测试 <code>test/test_ex47.rb</code></p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'test/unit'</span></div><div class="line">require_relative <span class="string">'../lib/ex47'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyUnitTests</span> &lt; Test::Unit::<span class="title">TestCase</span></span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">test_room</span><span class="params">()</span></span></div><div class="line">    gold = Room.new(<span class="string">"GoldRoom"</span>,</div><div class="line">                    <span class="string">""</span><span class="string">"This room has gold in it you can grab. There's a</span></div><div class="line">                door to the north."<span class="string">""</span>)</div><div class="line">    assert_equal(gold.name, <span class="string">"GoldRoom"</span>)</div><div class="line">    assert_equal(gold.paths, &#123;&#125;)</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">test_room_paths</span><span class="params">()</span></span></div><div class="line">    center = Room.new(<span class="string">"Center"</span>, <span class="string">"Test room in the center."</span>)</div><div class="line">    north = Room.new(<span class="string">"North"</span>, <span class="string">"Test room in the north."</span>)</div><div class="line">    south = Room.new(<span class="string">"South"</span>, <span class="string">"Test room in the south."</span>)</div><div class="line"></div><div class="line">    center.add_paths(&#123;<span class="symbol">:north</span> =&gt; north, <span class="symbol">:south</span> =&gt; south&#125;)</div><div class="line">    assert_equal(center.go(<span class="symbol">:north</span>), north)</div><div class="line">    assert_equal(center.go(<span class="symbol">:south</span>), south)</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">test_map</span><span class="params">()</span></span></div><div class="line">    start = Room.new(<span class="string">"Start"</span>, <span class="string">"You can go west and down a hole."</span>)</div><div class="line">    west = Room.new(<span class="string">"Trees"</span>, <span class="string">"There are trees here, you can go east."</span>)</div><div class="line">    down = Room.new(<span class="string">"Dungeon"</span>, <span class="string">"It's dark down here, you can go up."</span>)</div><div class="line"></div><div class="line">    start.add_paths(&#123;<span class="symbol">:west</span> =&gt; west, <span class="symbol">:down</span> =&gt; down&#125;)</div><div class="line">    west.add_paths(&#123;<span class="symbol">:east</span> =&gt; start&#125;)</div><div class="line">    down.add_paths(&#123;<span class="symbol">:up</span> =&gt; start&#125;)</div><div class="line"></div><div class="line">    assert_equal(start.go(<span class="symbol">:west</span>), west)</div><div class="line">    assert_equal(start.go(<span class="symbol">:west</span>).go(<span class="symbol">:east</span>), start)</div><div class="line">    assert_equal(start.go(<span class="symbol">:down</span>).go(<span class="symbol">:up</span>), start)</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>测试结果</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ ruby test_ex47.rb</div><div class="line">Run options:</div><div class="line"></div><div class="line"><span class="comment"># Running tests:</span></div><div class="line"></div><div class="line">Finished tests <span class="keyword">in</span> 0.004635s, 647.2492 tests/s, 1510.2481 assertions/s.</div><div class="line">3 tests, 7 assertions, 0 failures, 0 errors, 0 skips</div><div class="line"></div><div class="line">ruby -v: ruby 2.1.4p265 (2014-10-27 revision 48166) [x86_64-darwin14.0]</div></pre></td></tr></table></figure>
<h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>其实还剩下 48 - 52 五个习题，不过本文中我们的目标是简要了解 Ruby，就不深入网络框架的内容了。</p>
<p>需要注意的是，这里很多内容都是做了没说，遇到不懂的一定要仔细研究才是。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://github.com/wdxtub/LRTHW-CN-WDX" target="_blank" rel="external">本文对应源代码</a></li>
<li><a href="http://ruby.learncodethehardway.org/" target="_blank" rel="external">LRTHW 官方网站</a></li>
<li><a href="http://lrthw.github.io/" target="_blank" rel="external">笨方法學 Ruby</a></li>
</ul>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>您的支持是对我创作最大的鼓励！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/misc/wechat.jpg" alt="wdxtub WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/misc/alipay.jpg" alt="wdxtub Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/学习/" rel="tag">#学习</a>
          
            <a href="/tags/代码/" rel="tag">#代码</a>
          
            <a href="/tags/Ruby/" rel="tag">#Ruby</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/05/29/family-travel-journal-2016/" rel="next" title="探亲杂记">
                <i class="fa fa-chevron-left"></i> 探亲杂记
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/05/31/job-and-culture/" rel="prev" title="招聘与工程师文化">
                招聘与工程师文化 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          

  <p>热评文章</p>
  <div class="ds-top-threads" data-range="weekly" data-num-items="4"></div>


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/05/29/learn-ruby-the-hard-way/"
           data-title="【Ruby 之旅】II 我的笨办法学 Ruby" data-url="http://wdxtub.com/2016/05/29/learn-ruby-the-hard-way/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/misc/avatar.jpg"
               alt="wdxtub" />
          <p class="site-author-name" itemprop="name">wdxtub</p>
          <p class="site-description motion-element" itemprop="description">人文/科学/读书/写作/思考/编程/架构/数据/广交朋友/@SYSU/@CMU</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">710</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">874</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/wdxtub" target="_blank" title="GitHub">
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/wdxtub" target="_blank" title="微博">
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://douban.com/people/wdx" target="_blank" title="豆瓣">
                  
                  豆瓣
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/wdxtub" target="_blank" title="知乎">
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              不妨看看
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://zhchbin.github.io/" title="zhchbin" target="_blank">zhchbin</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.algorithmdog.com/" title="算法狗" target="_blank">算法狗</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.52cs.org/" title="我爱计算机" target="_blank">我爱计算机</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://jackqdyulei.github.io/" title="雷雷" target="_blank">雷雷</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://guojiex.github.io/" title="瓜瓜" target="_blank">瓜瓜</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://wdxtub.lofter.com/" title="我的 Lofter" target="_blank">我的 Lofter</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://wdxtub.com/interview/" title="刷题笔记" target="_blank">刷题笔记</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#系列文章"><span class="nav-number">1.</span> <span class="nav-text">系列文章</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开始之前"><span class="nav-number">2.</span> <span class="nav-text">开始之前</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-0-准备工作"><span class="nav-number">3.</span> <span class="nav-text">习题 0 准备工作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-1-第一个程序"><span class="nav-number">4.</span> <span class="nav-text">习题 1 第一个程序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-2-注释和井号"><span class="nav-number">5.</span> <span class="nav-text">习题 2 注释和井号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-3-数字和数学运算"><span class="nav-number">6.</span> <span class="nav-text">习题 3 数字和数学运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-4-变量和命名"><span class="nav-number">7.</span> <span class="nav-text">习题 4 变量和命名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-5-变量与格式化输出"><span class="nav-number">8.</span> <span class="nav-text">习题 5 变量与格式化输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-6-字符串和文字"><span class="nav-number">9.</span> <span class="nav-text">习题 6 字符串和文字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-7-更多输出"><span class="nav-number">10.</span> <span class="nav-text">习题 7 更多输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-8-输出-输出"><span class="nav-number">11.</span> <span class="nav-text">习题 8 输出 输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-9-输出-输出-再输出"><span class="nav-number">12.</span> <span class="nav-text">习题 9 输出 输出 再输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-10-那是什么？"><span class="nav-number">13.</span> <span class="nav-text">习题 10 那是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-11-输入"><span class="nav-number">14.</span> <span class="nav-text">习题 11 输入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-12-模块-Module"><span class="nav-number">15.</span> <span class="nav-text">习题 12 模块 Module</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-13-参数与解包"><span class="nav-number">16.</span> <span class="nav-text">习题 13 参数与解包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-14-提示和传递"><span class="nav-number">17.</span> <span class="nav-text">习题 14 提示和传递</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-15-读取文件"><span class="nav-number">18.</span> <span class="nav-text">习题 15 读取文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-16-读写文件"><span class="nav-number">19.</span> <span class="nav-text">习题 16 读写文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-17-更多文件操作"><span class="nav-number">20.</span> <span class="nav-text">习题 17 更多文件操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-18-命名-变量-函数"><span class="nav-number">21.</span> <span class="nav-text">习题 18 命名 变量 函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-19-函数和变量"><span class="nav-number">22.</span> <span class="nav-text">习题 19 函数和变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-20-函数与文件"><span class="nav-number">23.</span> <span class="nav-text">习题 20 函数与文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-21-函数返回值"><span class="nav-number">24.</span> <span class="nav-text">习题 21 函数返回值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-22-目前我们学了什么？"><span class="nav-number">25.</span> <span class="nav-text">习题 22 目前我们学了什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-23-阅读代码"><span class="nav-number">26.</span> <span class="nav-text">习题 23 阅读代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-24-复习一下"><span class="nav-number">27.</span> <span class="nav-text">习题 24 复习一下</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-25-导入自定义模块"><span class="nav-number">28.</span> <span class="nav-text">习题 25 导入自定义模块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-26-小测"><span class="nav-number">29.</span> <span class="nav-text">习题 26 小测</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-27-逻辑关系"><span class="nav-number">30.</span> <span class="nav-text">习题 27 逻辑关系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-28-布尔表达式"><span class="nav-number">31.</span> <span class="nav-text">习题 28 布尔表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-29-如果-IF"><span class="nav-number">32.</span> <span class="nav-text">习题 29 如果 IF</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-30-Else-和-If"><span class="nav-number">33.</span> <span class="nav-text">习题 30 Else 和 If</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-31-做出决定"><span class="nav-number">34.</span> <span class="nav-text">习题 31 做出决定</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-32-数组与循环"><span class="nav-number">35.</span> <span class="nav-text">习题 32 数组与循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-33-While-循环"><span class="nav-number">36.</span> <span class="nav-text">习题 33 While 循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-34-访问数组"><span class="nav-number">37.</span> <span class="nav-text">习题 34 访问数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-35-函数和分支"><span class="nav-number">38.</span> <span class="nav-text">习题 35 函数和分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-36-设计和测试"><span class="nav-number">39.</span> <span class="nav-text">习题 36 设计和测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-37-各种符号"><span class="nav-number">40.</span> <span class="nav-text">习题 37 各种符号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-38-再阅读代码"><span class="nav-number">41.</span> <span class="nav-text">习题 38 再阅读代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-39-操作数组"><span class="nav-number">42.</span> <span class="nav-text">习题 39 操作数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-40-哈希"><span class="nav-number">43.</span> <span class="nav-text">习题 40 哈希</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-41-来自-Percal-25-星球的哥顿人-Gothons"><span class="nav-number">44.</span> <span class="nav-text">习题 41 来自 Percal 25 星球的哥顿人(Gothons)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-42-类"><span class="nav-number">45.</span> <span class="nav-text">习题 42 类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-43-44-制作与评估游戏"><span class="nav-number">46.</span> <span class="nav-text">习题 43 44 制作与评估游戏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-45-类的关系"><span class="nav-number">47.</span> <span class="nav-text">习题 45 类的关系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-46-项目结构"><span class="nav-number">48.</span> <span class="nav-text">习题 46 项目结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题-47-自动化测试"><span class="nav-number">49.</span> <span class="nav-text">习题 47 自动化测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#写在最后"><span class="nav-number">50.</span> <span class="nav-text">写在最后</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考链接"><span class="nav-number">51.</span> <span class="nav-text">参考链接</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wdxtub</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"wdxblog"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementById('footer')
      || document.getElementById('footer')).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
      <script src="/js/src/hook-duoshuo.js"></script>
    
  





  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src=""></script>


  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


</body>
</html>
